--- !<flow>
name: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:coverageIARDMethods"
packageName: "AFS_APIWEB_To_CommonServices_v1"
audit:
  includePipeline: "NEVER"
signature:
  input: !<document>
    fields:
    - name: "AXAContextHeader"
      type: !<docref>
        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
    - name: "idContrat"
      type: !<string>
        xmlType: "string"
    - name: "policy_type"
      type: !<string>
        picklistChoices:
        - "AUTO"
        - "HOME"
    - name: "type_garantie"
      type: !<string> {}
    - name: "order_by"
      type: !<string> {}
    - name: "order_direction"
      type: !<string> {}
    - name: "evolved"
      type: !<javatype>
        wrapperType: "java.lang.Boolean"
    - name: "reference"
      type: !<string> {}
  output: !<document>
    fields:
    - name: "AXAContextHeader"
      type: !<docref>
        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
    - name: "COVERAGES_ELEMENTS"
      type: !<docref>
        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
rootStep: !<CompositeStep>
  nodes:
  - !<SEQUENCE>
    comment: "IARD BACK END"
    exitOn: "FAILURE"
    nodes:
    - !<MAP>
      comment: "getGarantieFranchiseBackendConfiguration"
      nodes:
      - !<Transformer>
        serviceName: "AFS_APIWEB_To_Configuration_v1.pub.backendConfiguration:getGarantieFranchiseBackendConfiguration"
        input: !<InputMap> {}
        output: !<OutputMap>
          nodes:
          - !<Copy>
            from: "/backendConfiguration/endpoint"
            to: "/iard.endpoint"
          - !<Copy>
            from: "/backendConfiguration/timeout"
            to: "/iard.timeout"
          - !<Copy>
            from: "/backendConfiguration/login"
            to: "/iard.user"
          - !<Copy>
            from: "/backendConfiguration/password"
            to: "/iard.password"
      pipelineChanges:
        added: !<document>
          fields:
          - name: "AXAContextHeader"
            type: !<docref>
              ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
          - name: "idContrat"
            type: !<string>
              xmlType: "string"
          - name: "policy_type"
            type: !<string>
              picklistChoices:
              - "AUTO"
              - "HOME"
          - name: "type_garantie"
            type: !<string> {}
          - name: "order_by"
            type: !<string> {}
          - name: "order_direction"
            type: !<string> {}
          - name: "evolved"
            type: !<javatype>
              wrapperType: "java.lang.Boolean"
          - name: "iard.endpoint"
            type: !<string> {}
          - name: "iard.timeout"
            type: !<string> {}
          - name: "iard.user"
            type: !<string> {}
          - name: "iard.password"
            type: !<string> {}
          - name: "reference"
            type: !<string> {}
    - !<MAP>
      comment: "AFS_APIWEB_To_Business_v1.pub.cache.coverage:getCoverage"
      nodes:
      - !<Drop>
        path: "/iard.endpoint"
      - !<Drop>
        path: "/iard.timeout"
      - !<Drop>
        path: "/iard.user"
      - !<Drop>
        path: "/iard.password"
      - !<Transformer>
        serviceName: "AFS_APIWEB_To_Business_v1.pub.cache:apiClientInvokeWithCache"
        input: !<InputMap>
          nodes:
          - !<SetValue>
            to: "/serviceName"
            value: "AFS_APIWEB_To_Business_v1.pub.cache.coverage:getCoverage"
          - !<Copy>
            from: "/idContrat"
            to: "/key"
          - !<SetValue>
            to: "/mode"
            value: "DEFAULT"
          - !<Copy>
            from: "/idContrat"
            to: "/tns1:getCoverage/requeteContrat/idContrat"
          - !<Copy>
            from: "/iard.timeout"
            to: "/timeout"
          - !<Copy>
            from: "/iard.endpoint"
            to: "/_url"
          - !<Copy>
            from: "/iard.password"
            to: "/auth/transport/pass"
          - !<Copy>
            from: "/iard.password"
            to: "/auth/message/pass"
          - !<Copy>
            from: "/iard.user"
            to: "/auth/message/user"
          - !<Copy>
            from: "/iard.user"
            to: "/auth/transport/user"
        output: !<OutputMap>
          nodes:
          - !<Copy>
            from: "/tns1:getCoverageResponse/reponseContrat"
            to: "/reponseContrat"
          - !<Copy>
            from: "/tns1:getCoverageResponse"
            to: "/tns1:getCoverageResponse"
      pipelineChanges: {}
    - !<INVOKE>
      disable: true
      pipelineChanges:
        added: !<document>
          fields:
          - name: "tns1:getCoverage"
            type: !<docref>
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
          - name: "auth"
            type: !<document> {}
          - name: "timeout"
            type: !<string> {}
          - name: "_url"
            type: !<string> {}
          - name: "tns1:getCoverageResponse"
            type: !<docref>
              optional: true
              xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
      serviceName: "AFS_APIWEB_To_Business_v1.pub.cache.coverage:getCoverage"
      input: !<InputMap>
        nodes:
        - !<Copy>
          from: "/idContrat"
          to: "/tns1:getCoverage/requeteContrat/idContrat"
        - !<Copy>
          from: "/iard.user"
          to: "/auth/transport/user"
        - !<Copy>
          from: "/iard.password"
          to: "/auth/transport/pass"
        - !<Copy>
          from: "/iard.endpoint"
          to: "/_url"
        - !<Copy>
          from: "/iard.timeout"
          to: "/timeout"
      output: !<OutputMap>
        nodes:
        - !<Copy>
          from: "/tns1:getCoverageResponse/reponseContrat"
          to: "/reponseContrat"
        - !<Copy>
          from: "/tns1:getCoverageResponse"
          to: "/tns1:getCoverageResponse"
  - !<SEQUENCE>
    comment: "FORMULES PACK ET COUVERTURES"
    exitOn: "FAILURE"
    nodes:
    - !<LOOP>
      inputArray: "/reponseContrat/productOption"
      nodes:
      - !<BRANCH>
        switchProperty: "/reponseContrat/productOption/ns1:rank"
        nodes:
        - !<BRANCH>
          evaluateLabels: true
          nodes:
          - !<SEQUENCE>
            label: "%reponseContrat/productOption/tns:status% == null || %reponseContrat/productOption/tns:status%\
              \ == \"\""
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              comment: "Formules"
              nodes:
              - !<Copy>
                from: "/reponseContrat/productOption/tns:IsComposedOf"
                to: "/FORMULE_SOUSCRITES"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "FORMULE_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
          label: "Formula"
        - !<BRANCH>
          evaluateLabels: true
          nodes:
          - !<SEQUENCE>
            label: "%reponseContrat/productOption/tns:status% == null || %reponseContrat/productOption/tns:status%\
              \ == \"\""
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              comment: "Couvertures"
              nodes:
              - !<Copy>
                from: "/reponseContrat/productOption/tns:IsComposedOf"
                to: "/COUVERTURES_SOUSCRITES"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "COUVERTURES_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
          label: "Level"
        - !<BRANCH>
          evaluateLabels: true
          nodes:
          - !<SEQUENCE>
            label: "%reponseContrat/productOption/tns:status% == null || %reponseContrat/productOption/tns:status%\
              \ == \"\""
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              nodes:
              - !<Copy>
                from: "/reponseContrat/productOption/tns:newProduct"
                to: "/PACKS_SOUSCRITS"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "PACKS_SOUSCRITS"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
          label: "Pack"
  - !<SEQUENCE>
    comment: "DATA SET"
    exitOn: "FAILURE"
    nodes:
    - !<MAP>
      comment: "COVERAGES ATTRIBUTES TO EXCLUDE"
      nodes:
      - !<Transformer>
        serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAttributesToMaskFromReferential"
        input: !<InputMap> {}
        output: !<OutputMap>
          nodes:
          - !<Copy>
            from: "/coverageAttributesToMask"
            to: "/coverageAttributesToMask"
      pipelineChanges:
        added: !<document>
          fields:
          - name: "AXAContextHeader"
            type: !<docref>
              ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
          - name: "idContrat"
            type: !<string>
              xmlType: "string"
          - name: "policy_type"
            type: !<string>
              picklistChoices:
              - "AUTO"
              - "HOME"
          - name: "type_garantie"
            type: !<string> {}
          - name: "order_by"
            type: !<string> {}
          - name: "order_direction"
            type: !<string> {}
          - name: "evolved"
            type: !<javatype>
              wrapperType: "java.lang.Boolean"
          - name: "reference"
            type: !<string> {}
          - name: "reponseContrat"
            type: !<docref>
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
          - name: "coverageAttributesToMask"
            type: !<docref>
              ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
          - name: "FORMULE_SOUSCRITES"
            type: !<docref>
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
          - name: "COUVERTURES_SOUSCRITES"
            type: !<docref>
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
          - name: "PACKS_SOUSCRITS"
            type: !<docref>
              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
    - !<LOOP>
      inputArray: "/reponseContrat/productCoverageSpecification"
      nodes:
      - !<MAP>
        comment: "Init Coverage Element"
        nodes:
        - !<Copy>
          from: "/reponseContrat/productCoverageSpecification/@key"
          to: "/coverageTmp/specification_id"
        - !<Copy>
          from: "/reponseContrat/productCoverageSpecification/tns:name"
          to: "/coverageTmp/specification_name"
        - !<Transformer>
          serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
          input: !<InputMap>
            nodes:
            - !<Copy>
              from: "/reponseContrat/productCoverageSpecification/@key"
              to: "/reference_ws"
            - !<Copy>
              from: "/policy_type"
              to: "/policy_type"
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/coverageAuto/description_simple"
              to: "/coverageTmp/description"
            - !<Copy>
              from: "/coverageAuto/rank"
              to: "/coverageTmp/marketing_order"
        - !<Copy>
          from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
          to: "/coverageTmp/coverage_category/id"
        - !<Transformer>
          serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
          input: !<InputMap>
            nodes:
            - !<Copy>
              from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
              to: "/reference_ws"
            - !<Copy>
              from: "/policy_type"
              to: "/policy_type"
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/coverageAuto/description_simple"
              to: "/coverageTmp/coverage_category/label"
        - !<Transformer>
          serviceName: "pub.list:appendToDocumentList"
          input: !<InputMap> {}
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/toList"
              to: "/coverageTmp/coverage_attributes"
        pipelineChanges:
          added: !<document>
            fields:
            - name: "coverageTmp"
              type: !<docref>
                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
      - !<BRANCH>
        evaluateLabels: true
        nodes:
        - !<BRANCH>
          switchProperty: "/reponseContrat/productCoverageSpecification/tns:typeName"
          nodes:
          - !<SEQUENCE>
            label: "$null"
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              nodes:
              - !<SetValue>
                to: "/TYPE_GARANTIE"
                value: "COVERAGE"
              pipelineChanges: {}
          - !<SEQUENCE>
            label: "SERVICE"
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              nodes:
              - !<SetValue>
                to: "/TYPE_GARANTIE"
                value: "SERVICE"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "AXAContextHeader"
                    type: !<docref>
                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                  - name: "idContrat"
                    type: !<string>
                      xmlType: "string"
                  - name: "policy_type"
                    type: !<string>
                      picklistChoices:
                      - "AUTO"
                      - "HOME"
                  - name: "type_garantie"
                    type: !<string> {}
                  - name: "order_by"
                    type: !<string> {}
                  - name: "order_direction"
                    type: !<string> {}
                  - name: "evolved"
                    type: !<javatype>
                      wrapperType: "java.lang.Boolean"
                  - name: "reference"
                    type: !<string> {}
                  - name: "reponseContrat"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                  - name: "coverageTmp"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - name: "coverageAttributesToMask"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                  - name: "FORMULE_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "COUVERTURES_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "PACKS_SOUSCRITS"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "TYPE_GARANTIE"
                    type: !<string> {}
          - !<SEQUENCE>
            label: "COUVERTURE_GENERALE"
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              nodes:
              - !<SetValue>
                to: "/TYPE_GARANTIE"
                value: "POLICY_RESTRICTION"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "AXAContextHeader"
                    type: !<docref>
                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                  - name: "idContrat"
                    type: !<string>
                      xmlType: "string"
                  - name: "policy_type"
                    type: !<string>
                      picklistChoices:
                      - "AUTO"
                      - "HOME"
                  - name: "type_garantie"
                    type: !<string> {}
                  - name: "order_by"
                    type: !<string> {}
                  - name: "order_direction"
                    type: !<string> {}
                  - name: "evolved"
                    type: !<javatype>
                      wrapperType: "java.lang.Boolean"
                  - name: "reference"
                    type: !<string> {}
                  - name: "reponseContrat"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                  - name: "coverageTmp"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - name: "coverageAttributesToMask"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                  - name: "FORMULE_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "COUVERTURES_SOUSCRITES"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "PACKS_SOUSCRITS"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - name: "TYPE_GARANTIE"
                    type: !<string> {}
          label: "%reponseContrat/productCoverageSpecification/tns:marketableIndicator%\
            \ == \"true\""
        label: "%reponseContrat/productCoverageSpecification/tns:status% == null ||\
          \ %reponseContrat/productCoverageSpecification/tns:status% == \"\""
      - !<BRANCH>
        switchProperty: "/TYPE_GARANTIE"
        nodes:
        - !<SEQUENCE>
          label: "/.+/"
          exitOn: "FAILURE"
          nodes:
          - !<SEQUENCE>
            disable: true
            comment: "TO ENHANCE IN ORDER TO MATCH EXISTENT CODE"
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              disable: true
              comment: "COVERAGE TYPE"
              nodes:
              - !<Copy>
                disable: true
                from: "/typeGarantieTmp"
                to: "/coverageTmp/coverage_type"
              - !<Drop>
                disable: true
                path: "/typeGarantieTmp"
              pipelineChanges: {}
            - !<LOOP>
              disable: true
              inputArray: "/PACKS_SOUSCRITS"
              nodes:
              - !<BRANCH>
                evaluateLabels: true
                nodes:
                - !<SEQUENCE>
                  disable: true
                  label: "%reponseContrat/productCoverageSpecification/@key% == %PACKS_SOUSCRITS/@ProductSpecificationReference%"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    disable: true
                    nodes:
                    - !<SetValue>
                      disable: true
                      to: "/coverageTmp/evolved"
                      value: true
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "coverageTmp"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "typeGarantieTmp"
                          type: !<string> {}
                  - !<EXIT>
                    disable: true
                    signalFailure: false
                    from: "LOOP"
                disable: true
            - !<LOOP>
              disable: true
              inputArray: "/COUVERTURES_SOUSCRITES"
              nodes:
              - !<BRANCH>
                evaluateLabels: true
                nodes:
                - !<SEQUENCE>
                  disable: true
                  label: "%reponseContrat/productCoverageSpecification/@key% == %COUVERTURES_SOUSCRITES/@ProductSpecificationReference%"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    disable: true
                    nodes:
                    - !<SetValue>
                      disable: true
                      to: "/coverageTmp/evolved"
                      value: false
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "coverageTmp"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "typeGarantieTmp"
                          type: !<string> {}
                  - !<LOOP>
                    disable: true
                    inputArray: "/reponseContrat/productOption"
                    nodes:
                    - !<BRANCH>
                      evaluateLabels: true
                      nodes:
                      - !<SEQUENCE>
                        disable: true
                        label: "%reponseContrat/productOption/tns:kindOfElementName%\
                          \ != null && %reponseContrat/productOption/tns:kindOfElementName%\
                          \ != \"\""
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          disable: true
                          comment: "MAP APPLY TAG TRUE"
                          nodes:
                          - !<SetValue>
                            disable: true
                            to: "/coverageTmp/evolved"
                            value: true
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "coverageTmp"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - !<EXIT>
                          disable: true
                          signalFailure: false
                          from: "LOOP"
                      disable: true
                    - !<LOOP>
                      disable: true
                      inputArray: "/reponseContrat/productOption/tns:IsComposedOf"
                      nodes:
                      - !<BRANCH>
                        evaluateLabels: true
                        nodes:
                        - !<SEQUENCE>
                          disable: true
                          label: "%coverageTmp/specification_id% == %reponseContrat/productOption/tns:IsComposedOf/@ProductSpecificationReference%"
                          exitOn: "FAILURE"
                          nodes:
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              disable: true
                              label: "%reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                \ == 0 || %reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                \ == \"0\""
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                disable: true
                                nodes:
                                - !<SetValue>
                                  disable: true
                                  to: "/coverageTmp/evolved"
                                  value: true
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "AXAContextHeader"
                                      type: !<docref>
                                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                    - name: "idContrat"
                                      type: !<string>
                                        xmlType: "string"
                                    - name: "policy_type"
                                      type: !<string>
                                        picklistChoices:
                                        - "AUTO"
                                        - "HOME"
                                    - name: "type_garantie"
                                      type: !<string> {}
                                    - name: "order_by"
                                      type: !<string> {}
                                    - name: "order_direction"
                                      type: !<string> {}
                                    - name: "evolved"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Boolean"
                                    - name: "reference"
                                      type: !<string> {}
                                    - name: "reponseContrat"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                    - name: "coverageTmp"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "coverageAttributesToMask"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                    - name: "FORMULE_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "COUVERTURES_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "PACKS_SOUSCRITS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - !<EXIT>
                                disable: true
                                signalFailure: false
                                from: "LOOP"
                            disable: true
                        disable: true
                  - !<EXIT>
                    disable: true
                    signalFailure: false
                    from: "LOOP"
                disable: true
            - !<LOOP>
              disable: true
              inputArray: "/FORMULE_SOUSCRITES"
              nodes:
              - !<BRANCH>
                evaluateLabels: true
                nodes:
                - !<SEQUENCE>
                  disable: true
                  label: "%reponseContrat/productCoverageSpecification/@key% == %FORMULE_SOUSCRITES/@ProductSpecificationReference%"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    disable: true
                    nodes:
                    - !<SetValue>
                      disable: true
                      to: "/coverageTmp/evolved"
                      value: false
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "coverageTmp"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                  - !<LOOP>
                    disable: true
                    inputArray: "/reponseContrat/productOption"
                    nodes:
                    - !<BRANCH>
                      evaluateLabels: true
                      nodes:
                      - !<SEQUENCE>
                        disable: true
                        label: "%reponseContrat/productOption/tns:kindOfElementName%\
                          \ != null && %reponseContrat/productOption/tns:kindOfElementName%\
                          \ != \"\""
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          disable: true
                          nodes:
                          - !<SetValue>
                            disable: true
                            to: "/coverageTmp/evolved"
                            value: true
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "coverageTmp"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - !<EXIT>
                          disable: true
                          signalFailure: false
                          from: "LOOP"
                      disable: true
                    - !<LOOP>
                      disable: true
                      inputArray: "/reponseContrat/productOption/tns:IsComposedOf"
                      nodes:
                      - !<BRANCH>
                        evaluateLabels: true
                        nodes:
                        - !<SEQUENCE>
                          disable: true
                          label: "%coverageTmp/specification_id% == %reponseContrat/productOption/tns:IsComposedOf/@ProductSpecificationReference%"
                          exitOn: "FAILURE"
                          nodes:
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              disable: true
                              label: "%reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                \ == 0 || %reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                \ == \"0\""
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                disable: true
                                nodes:
                                - !<SetValue>
                                  disable: true
                                  to: "/coverageTmp/evolved"
                                  value: true
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "AXAContextHeader"
                                      type: !<docref>
                                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                    - name: "idContrat"
                                      type: !<string>
                                        xmlType: "string"
                                    - name: "policy_type"
                                      type: !<string>
                                        picklistChoices:
                                        - "AUTO"
                                        - "HOME"
                                    - name: "type_garantie"
                                      type: !<string> {}
                                    - name: "order_by"
                                      type: !<string> {}
                                    - name: "order_direction"
                                      type: !<string> {}
                                    - name: "evolved"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Boolean"
                                    - name: "reference"
                                      type: !<string> {}
                                    - name: "reponseContrat"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                    - name: "coverageTmp"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "coverageAttributesToMask"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                    - name: "FORMULE_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "COUVERTURES_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "PACKS_SOUSCRITS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - !<EXIT>
                                disable: true
                                signalFailure: false
                                from: "LOOP"
                            disable: true
                        disable: true
                  - !<EXIT>
                    disable: true
                    signalFailure: false
                    from: "LOOP"
                disable: true
            - !<SEQUENCE>
              disable: true
              comment: "ATTRIBUTES"
              exitOn: "FAILURE"
              nodes:
              - !<LOOP>
                disable: true
                inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification"
                nodes:
                - !<LOOP>
                  disable: true
                  inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues"
                  nodes:
                  - !<LOOP>
                    disable: true
                    inputArray: "/coverageAttributesToMask"
                    nodes:
                    - !<BRANCH>
                      evaluateLabels: true
                      nodes:
                      - !<SEQUENCE>
                        disable: true
                        label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key%\
                          \ == %coverageAttributesToMask/attribute_key%"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          disable: true
                          comment: "Coverage rejected"
                          nodes:
                          - !<SetValue>
                            disable: true
                            to: "/coverageRejected"
                            value: "true"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "coverageRejected"
                                type: !<string> {}
                        - !<EXIT>
                          disable: true
                          signalFailure: false
                          from: "LOOP"
                      disable: true
                  - !<BRANCH>
                    switchProperty: "/coverageRejected"
                    nodes:
                    - !<SEQUENCE>
                      disable: true
                      label: "true"
                      exitOn: "FAILURE"
                    - !<SEQUENCE>
                      disable: true
                      label: "$default"
                      exitOn: "FAILURE"
                      nodes:
                      - !<MAP>
                        disable: true
                        comment: "init coverage attributes"
                        nodes:
                        - !<Copy>
                          disable: true
                          from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataType"
                          to: "/coverage_attributes_element/type"
                        - !<Transformer>
                          disable: true
                          serviceName: "AFS_common_apiweb_v1.pub.number:toDoubleClean"
                          input: !<InputMap>
                            nodes:
                            - !<Copy>
                              from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                              to: "/input"
                          output: !<OutputMap>
                            nodes:
                            - !<Copy>
                              from: "/roundedNumber"
                              to: "/coverage_attributes_element/numeric_value"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "coverage_attributes_element"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      - !<SEQUENCE>
                        disable: true
                        comment: "DEFINITION TYPE ATTRIBUT"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          disable: true
                          comment: "INIT TYPE ATTRIBUTE RESET UNIT TYPE"
                          nodes:
                          - !<SetValue>
                            disable: true
                            to: "/ATTRIBUTE_TYPE"
                            value: ""
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "coverageTmp"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "coverageRejected"
                                type: !<string> {}
                              - name: "coverage_attributes_element"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                        - !<BRANCH>
                          switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/*doctype"
                          nodes:
                          - !<SEQUENCE>
                            disable: true
                            label: "/LimitSpecification_Type/"
                            exitOn: "FAILURE"
                            nodes:
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                              nodes:
                              - !<SEQUENCE>
                                disable: true
                                comment: "PLAFOND"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  disable: true
                                  nodes:
                                  - !<SetValue>
                                    disable: true
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "PLAFOND"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "AXAContextHeader"
                                        type: !<docref>
                                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                      - name: "idContrat"
                                        type: !<string>
                                          xmlType: "string"
                                      - name: "policy_type"
                                        type: !<string>
                                          picklistChoices:
                                          - "AUTO"
                                          - "HOME"
                                      - name: "type_garantie"
                                        type: !<string> {}
                                      - name: "order_by"
                                        type: !<string> {}
                                      - name: "order_direction"
                                        type: !<string> {}
                                      - name: "evolved"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "reference"
                                        type: !<string> {}
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "coverageTmp"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "coverageAttributesToMask"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "coverageRejected"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              - !<SEQUENCE>
                                disable: true
                                label: "$null"
                                comment: "PLAFOND"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  disable: true
                                  nodes:
                                  - !<SetValue>
                                    disable: true
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "PLAFOND"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "AXAContextHeader"
                                        type: !<docref>
                                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                      - name: "idContrat"
                                        type: !<string>
                                          xmlType: "string"
                                      - name: "policy_type"
                                        type: !<string>
                                          picklistChoices:
                                          - "AUTO"
                                          - "HOME"
                                      - name: "type_garantie"
                                        type: !<string> {}
                                      - name: "order_by"
                                        type: !<string> {}
                                      - name: "order_direction"
                                        type: !<string> {}
                                      - name: "evolved"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "reference"
                                        type: !<string> {}
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "coverageTmp"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "coverageAttributesToMask"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "coverageRejected"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              - !<SEQUENCE>
                                disable: true
                                label: "$default"
                                comment: "SEUIL"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  disable: true
                                  nodes:
                                  - !<SetValue>
                                    disable: true
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "SEUIL_DECLENCHEMENT"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "AXAContextHeader"
                                        type: !<docref>
                                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                      - name: "idContrat"
                                        type: !<string>
                                          xmlType: "string"
                                      - name: "policy_type"
                                        type: !<string>
                                          picklistChoices:
                                          - "AUTO"
                                          - "HOME"
                                      - name: "type_garantie"
                                        type: !<string> {}
                                      - name: "order_by"
                                        type: !<string> {}
                                      - name: "order_direction"
                                        type: !<string> {}
                                      - name: "evolved"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "reference"
                                        type: !<string> {}
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "coverageTmp"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "coverageAttributesToMask"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "coverageRejected"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              disable: true
                          - !<SEQUENCE>
                            disable: true
                            label: "/DeductibleSpecification_Type/"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              disable: true
                              comment: "PLAFOND"
                              nodes:
                              - !<SetValue>
                                disable: true
                                to: "/ATTRIBUTE_TYPE"
                                value: "FRANCHISE"
                              pipelineChanges:
                                added: !<document>
                                  fields:
                                  - name: "AXAContextHeader"
                                    type: !<docref>
                                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                  - name: "idContrat"
                                    type: !<string>
                                      xmlType: "string"
                                  - name: "policy_type"
                                    type: !<string>
                                      picklistChoices:
                                      - "AUTO"
                                      - "HOME"
                                  - name: "type_garantie"
                                    type: !<string> {}
                                  - name: "order_by"
                                    type: !<string> {}
                                  - name: "order_direction"
                                    type: !<string> {}
                                  - name: "evolved"
                                    type: !<javatype>
                                      wrapperType: "java.lang.Boolean"
                                  - name: "reference"
                                    type: !<string> {}
                                  - name: "reponseContrat"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                  - name: "coverageTmp"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                  - name: "coverageAttributesToMask"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                  - name: "FORMULE_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "COUVERTURES_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "PACKS_SOUSCRITS"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "coverageRejected"
                                    type: !<string> {}
                                  - name: "coverage_attributes_element"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                  - name: "ATTRIBUTE_TYPE"
                                    type: !<string> {}
                          disable: true
                        - !<BRANCH>
                          switchProperty: "/ATTRIBUTE_TYPE"
                          nodes:
                          - !<SEQUENCE>
                            disable: true
                            label: "PLAFOND"
                            exitOn: "FAILURE"
                            nodes:
                            - !<INVOKE>
                              disable: true
                              pipelineChanges:
                                added: !<document>
                                  fields:
                                  - name: "DATA_NAME"
                                    type: !<string> {}
                                  - name: "DATA_MIN"
                                    type: !<string> {}
                                  - name: "DATA_MAX"
                                    type: !<string> {}
                                  - name: "DATA_VALUE"
                                    type: !<string> {}
                                  - name: "MIN_VALUE"
                                    type: !<string> {}
                                  - name: "DESCRIPTION"
                                    type: !<string> {}
                                  - name: "UNIT"
                                    type: !<string> {}
                                  - name: "DATA_NAME_TRIM"
                                    type: !<string> {}
                              serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                              input: !<InputMap>
                                nodes:
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                  to: "/DATA_NAME"
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                  to: "/DATA_MIN"
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                  to: "/DATA_MAX"
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                  to: "/DATA_VALUE"
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                  to: "/MIN_VALUE"
                              output: !<OutputMap>
                                nodes:
                                - !<SetValue>
                                  to: "/coverage_attributes_element/type"
                                  value: "LIMIT"
                                - !<Copy>
                                  from: "/UNIT"
                                  to: "/coverage_attributes_element/unit"
                                - !<Copy>
                                  from: "/DESCRIPTION"
                                  to: "/coverage_attributes_element/description"
                          - !<SEQUENCE>
                            disable: true
                            label: "FRANCHISE"
                            exitOn: "FAILURE"
                            nodes:
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                              nodes:
                              - !<BRANCH>
                                evaluateLabels: true
                                nodes:
                                - !<SEQUENCE>
                                  disable: true
                                  label: "%coverage_attributes_element/type% != \"\
                                    EUR\""
                                  exitOn: "FAILURE"
                                  nodes:
                                  - !<MAP>
                                    disable: true
                                    comment: "SKIP ELEMENT"
                                    nodes:
                                    - !<SetValue>
                                      disable: true
                                      to: "/SKIP_ELEMENT"
                                      value: "true"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "packageName"
                                          type: !<string> {}
                                        - name: "DATA_NAME"
                                          type: !<string> {}
                                        - name: "DATA_MIN"
                                          type: !<string> {}
                                        - name: "DATA_MAX"
                                          type: !<string> {}
                                        - name: "DATA_VALUE"
                                          type: !<string> {}
                                        - name: "MIN_VALUE"
                                          type: !<string> {}
                                        - name: "propertyName"
                                          type: !<string> {}
                                        - name: "TYPE_GARANTIE"
                                          type: !<string> {}
                                        - name: "productCoverageSpecification"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                        - name: "COVERAGES_ELEMENT"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "coverage_attributes_element"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "coverage_category"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                        - name: "coverage_attributes_elements"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "COMPTEUR"
                                          type: !<string> {}
                                        - name: "COVERAGE_REJECTED"
                                          type: !<string> {}
                                        - name: "ELEMENT"
                                          type: !<string> {}
                                        - name: "propertyValue"
                                          type: !<string>
                                            optional: true
                                        - name: "ATTRIBUTE_TYPE"
                                          type: !<string> {}
                                        - name: "DATA_NAME_TRIM"
                                          type: !<string> {}
                                        - name: "DESCRIPTION"
                                          type: !<string> {}
                                        - name: "UNIT"
                                          type: !<string> {}
                                        - name: "SKIP_ELEMENT"
                                          type: !<string> {}
                                - !<SEQUENCE>
                                  disable: true
                                  label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue%\
                                    \ != 0"
                                  comment: "RG264"
                                  exitOn: "FAILURE"
                                  nodes:
                                  - !<MAP>
                                    disable: true
                                    comment: "SKIP ELEMENT"
                                    nodes:
                                    - !<SetValue>
                                      disable: true
                                      to: "/SKIP_ELEMENT"
                                      value: "true"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "tns1:getCoverage"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                                        - name: "DATA_NAME"
                                          type: !<string> {}
                                        - name: "DATA_MIN"
                                          type: !<string> {}
                                        - name: "DATA_MAX"
                                          type: !<string> {}
                                        - name: "DATA_VALUE"
                                          type: !<string> {}
                                        - name: "MIN_VALUE"
                                          type: !<string> {}
                                        - name: "propertyName"
                                          type: !<string> {}
                                        - name: "SERVICES_RETENUS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "RESTRICTIONS_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                                          type: !<string> {}
                                        - name: "GARANTIES_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                        - name: "auth"
                                          type: !<document> {}
                                        - name: "timeout"
                                          type: !<string> {}
                                        - name: "FORMULE_CONTRAT"
                                          type: !<string> {}
                                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                          type: !<string> {}
                                        - name: "FORMULE_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "PACKS_SOUSCRITS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "TYPE_GARANTIE"
                                          type: !<string> {}
                                        - name: "coverage_attributes_element"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "coverage_attributes_elements"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "ATTRIBUTE_TYPE"
                                          type: !<string> {}
                                        - name: "SKIP_ELEMENT"
                                          type: !<string> {}
                                        - name: "TAG_EVOLVED"
                                          type: !<string> {}
                                        - name: "ELEMENT"
                                          type: !<string> {}
                                        - name: "COUVERTURES_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "packageName"
                                          type: !<string> {}
                                        - name: "_url"
                                          type: !<string> {}
                                        - name: "propertyKey"
                                          type: !<document> {}
                                        - name: "AXAContextHeader"
                                          type: !<docref>
                                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                        - name: "idContrat"
                                          type: !<string>
                                            xmlType: "string"
                                        - name: "iard.endpoint"
                                          type: !<string> {}
                                        - name: "iard.timeout"
                                          type: !<string> {}
                                        - name: "COVERAGE_REJECTED"
                                          type: !<string> {}
                                        - name: "iard.user"
                                          type: !<string> {}
                                        - name: "iard.password"
                                          type: !<string> {}
                                        - name: "type_garantie"
                                          type: !<string> {}
                                        - name: "order_by"
                                          type: !<string> {}
                                        - name: "order_direction"
                                          type: !<string> {}
                                        - name: "reponseContrat"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                        - name: "evolved"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Boolean"
                                        - name: "reference"
                                          type: !<string> {}
                                        - name: "property"
                                          type: !<document> {}
                                        - name: "tns1:getCoverageResponse"
                                          type: !<docref>
                                            optional: true
                                            xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                        - name: "fault"
                                          type: !<document>
                                            optional: true
                                        - name: "transportInfo"
                                          type: !<document>
                                            optional: true
                                        - name: "COVERAGES_ELEMENT"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "coverage_category"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                        - name: "COMPTEUR"
                                          type: !<string> {}
                                        - name: "propertyValue"
                                          type: !<string>
                                            optional: true
                                        - name: "DATA_NAME_TRIM"
                                          type: !<string> {}
                                        - name: "DESCRIPTION"
                                          type: !<string> {}
                                        - name: "UNIT"
                                          type: !<string> {}
                                label: "ATOUTAGE"
                                disable: true
                              - !<INVOKE>
                                disable: true
                                label: "$default"
                                pipelineChanges: {}
                                serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                    to: "/DATA_NAME"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                    to: "/DATA_VALUE"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                    to: "/DATA_MIN"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                    to: "/DATA_MAX"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                    to: "/MIN_VALUE"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/DESCRIPTION"
                                    to: "/coverage_attributes_element/description"
                                  - !<Copy>
                                    from: "/UNIT"
                                    to: "/coverage_attributes_element/unit"
                                  - !<SetValue>
                                    to: "/coverage_attributes_element/type"
                                    value: "DEDUCTIBLE"
                              comment: "RG264"
                              disable: true
                          - !<SEQUENCE>
                            disable: true
                            label: "SEUIL_DECLENCHEMENT"
                            exitOn: "FAILURE"
                            nodes:
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                              nodes:
                              - !<MAP>
                                disable: true
                                label: "ATOUTAGE"
                                comment: "SKIP ELEMENT"
                                nodes:
                                - !<SetValue>
                                  disable: true
                                  to: "/SKIP_ELEMENT"
                                  value: "true"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "packageName"
                                      type: !<string> {}
                                    - name: "DATA_NAME"
                                      type: !<string> {}
                                    - name: "DATA_MIN"
                                      type: !<string> {}
                                    - name: "DATA_MAX"
                                      type: !<string> {}
                                    - name: "DATA_VALUE"
                                      type: !<string> {}
                                    - name: "MIN_VALUE"
                                      type: !<string> {}
                                    - name: "propertyName"
                                      type: !<string> {}
                                    - name: "TYPE_GARANTIE"
                                      type: !<string> {}
                                    - name: "productCoverageSpecification"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                    - name: "COVERAGES_ELEMENT"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "coverage_attributes_element"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                    - name: "coverage_category"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                    - name: "coverage_attributes_elements"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                    - name: "COMPTEUR"
                                      type: !<string> {}
                                    - name: "COVERAGE_REJECTED"
                                      type: !<string> {}
                                    - name: "ELEMENT"
                                      type: !<string> {}
                                    - name: "propertyValue"
                                      type: !<string>
                                        optional: true
                                    - name: "ATTRIBUTE_TYPE"
                                      type: !<string> {}
                                    - name: "DATA_NAME_TRIM"
                                      type: !<string> {}
                                    - name: "DESCRIPTION"
                                      type: !<string> {}
                                    - name: "SKIP_ELEMENT"
                                      type: !<string> {}
                                    - name: "UNIT"
                                      type: !<string> {}
                              - !<INVOKE>
                                disable: true
                                label: "$default"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "numeric_value"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Double"
                                serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphSeuilDeclenchementAttributes"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                    to: "/DATA_NAME"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                    to: "/DATA_VALUE"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                    to: "/DATA_MIN"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                    to: "/DATA_MAX"
                                  - !<Copy>
                                    from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                    to: "/MIN_VALUE"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/DESCRIPTION"
                                    to: "/coverage_attributes_element/description"
                                  - !<Copy>
                                    from: "/UNIT"
                                    to: "/coverage_attributes_element/unit"
                                  - !<Copy>
                                    from: "/numeric_value"
                                    to: "/coverage_attributes_element/numeric_value"
                                  - !<SetValue>
                                    to: "/coverage_attributes_element/type"
                                    value: "APPLICATION_THRESHOLD"
                              comment: "RG263"
                              disable: true
                          disable: true
                        - !<BRANCH>
                          switchProperty: "/SKIP_ELEMENT"
                          nodes:
                          - !<SEQUENCE>
                            disable: true
                            label: "true"
                            exitOn: "FAILURE"
                          - !<SEQUENCE>
                            disable: true
                            label: "$default"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              disable: true
                              comment: "USE CASE"
                              nodes:
                              - !<Copy>
                                disable: true
                                from: "/DATA_NAME_TRIM"
                                to: "/coverage_attributes_element/use_case"
                              - !<Drop>
                                disable: true
                                path: "/SKIP_ELEMENT"
                              - !<Drop>
                                disable: true
                                path: "/ATTRIBUTE_TYPE"
                              - !<Drop>
                                disable: true
                                path: "/DESCRIPTION"
                              - !<Drop>
                                disable: true
                                path: "/UNIT"
                              - !<Drop>
                                disable: true
                                path: "/DATA_NAME_TRIM"
                              - !<Drop>
                                disable: true
                                path: "/DATA_MIN"
                              - !<Drop>
                                disable: true
                                path: "/DATA_MAX"
                              - !<Drop>
                                disable: true
                                path: "/DATA_VALUE"
                              - !<Drop>
                                disable: true
                                path: "/MIN_VALUE"
                              - !<Drop>
                                disable: true
                                path: "/DATA_NAME"
                              - !<Drop>
                                disable: true
                                path: "/numeric_value"
                              pipelineChanges: {}
                            - !<MAP>
                              disable: true
                              comment: "add to elements"
                              nodes:
                              - !<Transformer>
                                disable: true
                                serviceName: "pub.list:appendToDocumentList"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/coverage_attributes_element"
                                    to: "/fromItem"
                                  - !<Copy>
                                    from: "/coverageTmp/coverage_attributes"
                                    to: "/toList"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/toList"
                                    to: "/coverageTmp/coverage_attributes"
                              - !<Drop>
                                disable: true
                                path: "/ATTRIBUTE_TYPE"
                              - !<Drop>
                                disable: true
                                path: "/DESCRIPTION"
                              - !<Drop>
                                disable: true
                                path: "/UNIT"
                              - !<Drop>
                                disable: true
                                path: "/DATA_NAME_TRIM"
                              - !<Drop>
                                disable: true
                                path: "/coverageRejected"
                              pipelineChanges: {}
                          disable: true
                        - !<BRANCH>
                          switchProperty: "/SKIP_ELEMENT"
                          nodes:
                          - !<SEQUENCE>
                            disable: true
                            label: "true"
                            exitOn: "FAILURE"
                          - !<SEQUENCE>
                            disable: true
                            label: "$default"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              disable: true
                              comment: "DROP SKIP ELEMENT"
                              nodes:
                              - !<Drop>
                                disable: true
                                path: "/SKIP_ELEMENT"
                              pipelineChanges: {}
                            - !<SEQUENCE>
                              disable: true
                              comment: "USE CASE TAG"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                disable: true
                                comment: "USE CASE"
                                nodes:
                                - !<Copy>
                                  disable: true
                                  from: "/DATA_NAME_TRIM"
                                  to: "/coverage_attributes_element/use_case"
                                pipelineChanges: {}
                            - !<MAP>
                              disable: true
                              comment: "REMOVE NULL FIELDS"
                              nodes:
                              - !<Transformer>
                                disable: true
                                serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/coverage_attributes_element/use_case"
                                    to: "/inputValue"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/outputValue"
                                    to: "/coverage_attributes_element/use_case"
                              pipelineChanges: {}
                            - !<MAP>
                              disable: true
                              comment: "CLONE ELEMENT"
                              nodes:
                              - !<Transformer>
                                disable: true
                                serviceName: "pub.utils:deepClone"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/coverage_attributes_element"
                                    to: "/originalObject"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/clonedObject"
                                    to: "/coverage_attributes_element_CLONE"
                              pipelineChanges:
                                added: !<document>
                                  fields:
                                  - name: "coverage_attributes_element_CLONE"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - !<MAP>
                              disable: true
                              comment: "TO LIST ELEMENT"
                              nodes:
                              - !<Transformer>
                                disable: true
                                serviceName: "pub.list:appendToDocumentList"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/coverage_attributes_element_CLONE"
                                    to: "/fromItem"
                                  - !<Copy>
                                    from: "/coverage_attributes_elements"
                                    to: "/toList"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/toList"
                                    to: "/coverage_attributes_elements"
                              pipelineChanges: {}
                            - !<MAP>
                              disable: true
                              comment: "add to elements"
                              nodes:
                              - !<Transformer>
                                disable: true
                                serviceName: "pub.list:appendToDocumentList"
                                input: !<InputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/coverage_attributes_element"
                                    to: "/fromItem"
                                  - !<Copy>
                                    from: "/coverageTmp/coverage_attributes"
                                    to: "/toList"
                                output: !<OutputMap>
                                  nodes:
                                  - !<Copy>
                                    from: "/toList"
                                    to: "/coverageTmp/coverage_attributes"
                              - !<Drop>
                                disable: true
                                path: "/ATTRIBUTE_TYPE"
                              - !<Drop>
                                disable: true
                                path: "/DESCRIPTION"
                              - !<Drop>
                                disable: true
                                path: "/UNIT"
                              - !<Drop>
                                disable: true
                                path: "/DATA_NAME_TRIM"
                              - !<Drop>
                                disable: true
                                path: "/coverageRejected"
                              pipelineChanges: {}
                          - !<SEQUENCE>
                            disable: true
                            label: "$default"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              disable: true
                          disable: true
                    disable: true
            - !<MAP>
              disable: true
              comment: "ADD TO COVERAGE_ELEMENTS"
              nodes:
              - !<Transformer>
                disable: true
                serviceName: "pub.list:appendToDocumentList"
                input: !<InputMap>
                  nodes:
                  - !<Copy>
                    from: "/COVERAGES_ELEMENTS"
                    to: "/toList"
                  - !<Copy>
                    from: "/coverageTmp"
                    to: "/fromItem"
                output: !<OutputMap>
                  nodes:
                  - !<Copy>
                    from: "/toList"
                    to: "/COVERAGES_ELEMENTS"
              - !<Drop>
                disable: true
                path: "/coverageTmp"
              - !<Drop>
                disable: true
                path: "/typeGarantieTmp"
              pipelineChanges: {}
          - !<LOOP>
            inputArray: "/PACKS_SOUSCRITS"
            nodes:
            - !<BRANCH>
              evaluateLabels: true
              nodes:
              - !<SEQUENCE>
                label: "%reponseContrat/productCoverageSpecification/@key% == %PACKS_SOUSCRITS/@ProductSpecificationReference%"
                exitOn: "FAILURE"
                nodes:
                - !<SEQUENCE>
                  comment: "HAUT NIVEAU DE GARANTIE DESCRIPTIONS"
                  exitOn: "FAILURE"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/reponseContrat/productCoverageSpecification/@key"
                    nodes:
                    - !<MAP>
                      label: "AT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE ELEMENT"
                    nodes:
                    - !<Drop>
                      path: "/COVERAGES_ELEMENT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE CATEGORY"
                    nodes:
                    - !<Drop>
                      path: "/coverage_category"
                  - !<MAP>
                    comment: "NOUVEAU MAPPING GARANTIE PARENT"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/@key"
                      to: "/COVERAGES_ELEMENT/specification_id"
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/tns:name"
                      to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Copy>
                      from: "/TYPE_GARANTIE"
                      to: "/COVERAGES_ELEMENT/coverage_type"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - !<MAP>
                    comment: "DESCRIPTION ELEMENT PARENT"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/specification_id"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "DESCRIPTION COVERAGE CATEGORY"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                      to: "/coverage_category/id"
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/coverage_category/label"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                  - !<MAP>
                    comment: "CLEAN EMPTY CATEGORY DESCIRPTION"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverage_category/label"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/coverage_category/label"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "LINK ATTRIBUTE TO PARENT"
                    nodes:
                    - !<Copy>
                      from: "/coverage_category"
                      to: "/COVERAGES_ELEMENT/coverage_category(1)"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "MARKETING ORDER"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "getCoverageAutoByReferenceWsFromReferential | rank"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/@key"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/rank"
                          to: "/COVERAGES_ELEMENT/marketing_order"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ATTRIBUTES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "INIT LIST ATTRIBUTES ELEMENTS VIDE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap> {}
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<string> {}
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "tns1:getCoverageResponse"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - !<LOOP>
                    inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification"
                    nodes:
                    - !<LOOP>
                      inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues"
                      nodes:
                      - !<MAP>
                        comment: "CLEAN ATTRIBUTE"
                        nodes:
                        - !<Drop>
                          path: "/ELEMENT"
                        - !<Drop>
                          path: "/UNIT"
                        - !<Drop>
                          path: "/DESCRIPTION"
                        - !<Drop>
                          path: "/DATA_NAME_TRIM"
                        - !<Drop>
                          path: "/propertyValue"
                        - !<Drop>
                          path: "/DATA_NAME"
                        - !<Drop>
                          path: "/DATA_VALUE"
                        - !<Drop>
                          path: "/coverage_attributes_element"
                        pipelineChanges: {}
                      - !<SEQUENCE>
                        comment: "COVERAGE REJECTED ?"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "INIT COVERAGE REJECTED FALSE"
                          nodes:
                          - !<SetValue>
                            to: "/COVERAGE_REJECTED"
                            value: "false"
                          - !<Transformer>
                            serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAttributesToMaskFromReferential"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/coverageAttributesToMask(0)"
                                to: "/coverageAttributesToMask"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "SERVICES_RETENUS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "RESTRICTIONS_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "NIVEAU_COUVERTURE_CONTRAT"
                                type: !<string> {}
                              - name: "GARANTIES_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "FORMULE_CONTRAT"
                                type: !<string> {}
                              - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                type: !<string> {}
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "TAG_EVOLVED"
                                type: !<string> {}
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "tns1:getCoverageResponse"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                              - name: "reference"
                                type: !<string> {}
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - !<LOOP>
                          inputArray: "/coverageAttributesToMask"
                          nodes:
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key%\
                                \ == %coverageAttributesToMask/attribute_key%"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "REJECT TRUE"
                                nodes:
                                - !<SetValue>
                                  to: "/COVERAGE_REJECTED"
                                  value: "true"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "AXAContextHeader"
                                      type: !<docref>
                                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                    - name: "SERVICES_RETENUS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "RESTRICTIONS_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                                      type: !<string> {}
                                    - name: "GARANTIES_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                    - name: "idContrat"
                                      type: !<string>
                                        xmlType: "string"
                                    - name: "type_garantie"
                                      type: !<string> {}
                                    - name: "FORMULE_CONTRAT"
                                      type: !<string> {}
                                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                      type: !<string> {}
                                    - name: "FORMULE_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "PACKS_SOUSCRITS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "TYPE_GARANTIE"
                                      type: !<string> {}
                                    - name: "coverage_attributes_elements"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                    - name: "TAG_EVOLVED"
                                      type: !<string> {}
                                    - name: "COUVERTURES_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "order_by"
                                      type: !<string> {}
                                    - name: "order_direction"
                                      type: !<string> {}
                                    - name: "evolved"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Boolean"
                                    - name: "reference"
                                      type: !<string> {}
                                    - name: "reponseContrat"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                    - name: "tns1:getCoverageResponse"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                    - name: "COVERAGES_ELEMENT"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "COVERAGE_REJECTED"
                                      type: !<string> {}
                                    - name: "coverage_category"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                    - name: "coverageAttributesToMask"
                                      type: !<document> {}
                              - !<EXIT>
                                signalFailure: false
                                from: "LOOP"
                      - !<BRANCH>
                        switchProperty: "/COVERAGE_REJECTED"
                        nodes:
                        - !<SEQUENCE>
                          label: "false"
                          exitOn: "FAILURE"
                          nodes:
                          - !<MAP>
                            comment: "NOUVEAU MAPPING ATTRIBUTE"
                            nodes:
                            - !<Copy>
                              from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataType"
                              to: "/coverage_attributes_element/type"
                            - !<Transformer>
                              serviceName: "AFS_common_apiweb_v1.pub.number:toDoubleClean"
                              input: !<InputMap>
                                nodes:
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                  to: "/input"
                              output: !<OutputMap>
                                nodes:
                                - !<Copy>
                                  from: "/roundedNumber"
                                  to: "/coverage_attributes_element/numeric_value"
                            pipelineChanges:
                              added: !<document>
                                fields:
                                - name: "coverage_attributes_element"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - !<SEQUENCE>
                            comment: "DEFINITION DU TYPE D'ATTRIBUT"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              comment: "INIT TYPE ATTRIBUTE RESET UNIT TYPE"
                              nodes:
                              - !<SetValue>
                                to: "/ATTRIBUTE_TYPE"
                                value: ""
                              - !<Drop>
                                path: "/UNIT"
                              pipelineChanges:
                                added: !<document>
                                  fields:
                                  - name: "packageName"
                                    type: !<string> {}
                                  - name: "tns:GetCoverage"
                                    type: !<docref>
                                      ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                                  - name: "SERVICES_RETENUS"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "RESTRICTIONS_RETENUES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "NIVEAU_COUVERTURE_CONTRAT"
                                    type: !<string> {}
                                  - name: "GARANTIES_RETENUES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                  - name: "auth"
                                    type: !<document> {}
                                  - name: "timeout"
                                    type: !<string> {}
                                  - name: "FORMULE_CONTRAT"
                                    type: !<string> {}
                                  - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                    type: !<string> {}
                                  - name: "FORMULE_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "COVERAGES_ELEMENT"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                  - name: "coverage_attributes_elements"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                  - name: "coverage_attributes_element"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                  - name: "PACKS_SOUSCRITS"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "ATTRIBUTE_TYPE"
                                    type: !<string> {}
                                  - name: "TYPE_GARANTIE"
                                    type: !<string> {}
                                  - name: "TAG_EVOLVED"
                                    type: !<string> {}
                                  - name: "COUVERTURES_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "idContrat"
                                    type: !<string>
                                      xmlType: "string"
                                  - name: "_url"
                                    type: !<string> {}
                                  - name: "fault"
                                    type: !<document>
                                      optional: true
                                  - name: "transportInfo"
                                    type: !<document>
                                      optional: true
                                  - name: "reponseContrat"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                  - name: "AXAContextHeader"
                                    type: !<docref>
                                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                  - name: "COMPTEUR"
                                    type: !<string> {}
                                  - name: "COVERAGE_REJECTED"
                                    type: !<string> {}
                                  - name: "propertyValue"
                                    type: !<string>
                                      optional: true
                                  - name: "ELEMENT"
                                    type: !<string> {}
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/*doctype"
                              nodes:
                              - !<SEQUENCE>
                                label: "/LimitSpecification_Type/"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                  nodes:
                                  - !<SEQUENCE>
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$null"
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$default"
                                    comment: "SEUIL"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "SEUIL"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "SEUIL_DECLENCHEMENT"
                              - !<SEQUENCE>
                                label: "/DeductibleSpecification_Type/"
                                comment: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "PLAFOND"
                                  nodes:
                                  - !<SetValue>
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "FRANCHISE"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          optional: true
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "SERVICES_RETENUS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "RESTRICTIONS_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                                        type: !<string> {}
                                      - name: "GARANTIES_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                      - name: "FORMULE_CONTRAT"
                                        type: !<string> {}
                                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                        type: !<string> {}
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "TYPE_GARANTIE"
                                        type: !<string> {}
                                      - name: "TAG_EVOLVED"
                                        type: !<string> {}
                                      - name: "coverage_attributes_elements"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "COVERAGES_ELEMENT"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              comment: "EXTRACT TYPE"
                            - !<MAP>
                              comment: "CLEAN RESULTS"
                              nodes:
                              - !<Drop>
                                path: "/DATA_NAME_TRIM(1)"
                              - !<Drop>
                                path: "/UNIT"
                              - !<Drop>
                                path: "/DESCRIPTION(1)"
                              - !<Drop>
                                path: "/SKIP_ELEMENT"
                              pipelineChanges: {}
                            - !<MAP>
                              comment: "RESET SKIP ELEMENT"
                              nodes:
                              - !<SetValue>
                                to: "/SKIP_ELEMENT"
                                value: "false"
                              pipelineChanges:
                                added: !<document>
                                  fields:
                                  - name: "tns1:getCoverage"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                                  - name: "propertyName"
                                    type: !<string> {}
                                  - name: "SERVICES_RETENUS"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "RESTRICTIONS_RETENUES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "NIVEAU_COUVERTURE_CONTRAT"
                                    type: !<string> {}
                                  - name: "GARANTIES_RETENUES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                  - name: "auth"
                                    type: !<document> {}
                                  - name: "timeout"
                                    type: !<string> {}
                                  - name: "FORMULE_CONTRAT"
                                    type: !<string> {}
                                  - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                    type: !<string> {}
                                  - name: "FORMULE_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "PACKS_SOUSCRITS"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "TYPE_GARANTIE"
                                    type: !<string> {}
                                  - name: "coverage_attributes_element"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                  - name: "coverage_attributes_elements"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                  - name: "ATTRIBUTE_TYPE"
                                    type: !<string> {}
                                  - name: "TAG_EVOLVED"
                                    type: !<string> {}
                                  - name: "ELEMENT"
                                    type: !<string> {}
                                  - name: "COUVERTURES_SOUSCRITES"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                  - name: "packageName"
                                    type: !<string> {}
                                  - name: "_url"
                                    type: !<string> {}
                                  - name: "propertyKey"
                                    type: !<document> {}
                                  - name: "AXAContextHeader"
                                    type: !<docref>
                                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                  - name: "idContrat"
                                    type: !<string>
                                      xmlType: "string"
                                  - name: "iard.endpoint"
                                    type: !<string> {}
                                  - name: "iard.timeout"
                                    type: !<string> {}
                                  - name: "COVERAGE_REJECTED"
                                    type: !<string> {}
                                  - name: "iard.user"
                                    type: !<string> {}
                                  - name: "iard.password"
                                    type: !<string> {}
                                  - name: "type_garantie"
                                    type: !<string> {}
                                  - name: "order_by"
                                    type: !<string> {}
                                  - name: "order_direction"
                                    type: !<string> {}
                                  - name: "reponseContrat"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                  - name: "evolved"
                                    type: !<javatype>
                                      wrapperType: "java.lang.Boolean"
                                  - name: "reference"
                                    type: !<string> {}
                                  - name: "property"
                                    type: !<document> {}
                                  - name: "tns1:getCoverageResponse"
                                    type: !<docref>
                                      optional: true
                                      xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                      ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                  - name: "fault"
                                    type: !<document>
                                      optional: true
                                  - name: "transportInfo"
                                    type: !<document>
                                      optional: true
                                  - name: "COVERAGES_ELEMENT"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                  - name: "coverage_category"
                                    type: !<docref>
                                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                  - name: "COMPTEUR"
                                    type: !<string> {}
                                  - name: "propertyValue"
                                    type: !<string>
                                      optional: true
                                  - name: "DATA_NAME_TRIM"
                                    type: !<string> {}
                                  - name: "DESCRIPTION"
                                    type: !<string> {}
                                  - name: "SKIP_ELEMENT"
                                    type: !<string> {}
                            - !<BRANCH>
                              switchProperty: "/ATTRIBUTE_TYPE"
                              nodes:
                              - !<SEQUENCE>
                                label: "PLAFOND"
                                exitOn: "FAILURE"
                                nodes:
                                - !<INVOKE>
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "DATA_NAME"
                                        type: !<string> {}
                                      - name: "DATA_MIN"
                                        type: !<string> {}
                                      - name: "DATA_MAX"
                                        type: !<string> {}
                                      - name: "DATA_VALUE"
                                        type: !<string> {}
                                      - name: "MIN_VALUE"
                                        type: !<string> {}
                                      - name: "UNIT"
                                        type: !<string> {}
                                  serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                      to: "/DATA_NAME"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                      to: "/DATA_VALUE"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/DATA_MIN"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/MIN_VALUE"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                      to: "/DATA_MAX"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/DESCRIPTION"
                                      to: "/coverage_attributes_element/description"
                                    - !<Copy>
                                      from: "/UNIT"
                                      to: "/coverage_attributes_element/unit"
                                    - !<SetValue>
                                      to: "/coverage_attributes_element/type"
                                      value: "LIMIT"
                              - !<SEQUENCE>
                                label: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<BRANCH>
                                    evaluateLabels: true
                                    nodes:
                                    - !<SEQUENCE>
                                      label: "%coverage_attributes_element/type% !=\
                                        \ \"EUR\""
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                        pipelineChanges:
                                          added: !<document>
                                            fields:
                                            - name: "packageName"
                                              type: !<string> {}
                                            - name: "DATA_NAME"
                                              type: !<string> {}
                                            - name: "DATA_MIN"
                                              type: !<string> {}
                                            - name: "DATA_MAX"
                                              type: !<string> {}
                                            - name: "DATA_VALUE"
                                              type: !<string> {}
                                            - name: "MIN_VALUE"
                                              type: !<string> {}
                                            - name: "propertyName"
                                              type: !<string> {}
                                            - name: "TYPE_GARANTIE"
                                              type: !<string> {}
                                            - name: "productCoverageSpecification"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                            - name: "COVERAGES_ELEMENT"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "coverage_attributes_element"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "coverage_category"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                            - name: "coverage_attributes_elements"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "COMPTEUR"
                                              type: !<string> {}
                                            - name: "COVERAGE_REJECTED"
                                              type: !<string> {}
                                            - name: "ELEMENT"
                                              type: !<string> {}
                                            - name: "propertyValue"
                                              type: !<string>
                                                optional: true
                                            - name: "ATTRIBUTE_TYPE"
                                              type: !<string> {}
                                            - name: "DATA_NAME_TRIM"
                                              type: !<string> {}
                                            - name: "DESCRIPTION"
                                              type: !<string> {}
                                            - name: "UNIT"
                                              type: !<string> {}
                                            - name: "SKIP_ELEMENT"
                                              type: !<string> {}
                                    - !<SEQUENCE>
                                      label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue%\
                                        \ != 0"
                                      comment: "RG264"
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                        pipelineChanges:
                                          added: !<document>
                                            fields:
                                            - name: "tns1:getCoverage"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                                            - name: "DATA_NAME"
                                              type: !<string> {}
                                            - name: "DATA_MIN"
                                              type: !<string> {}
                                            - name: "DATA_MAX"
                                              type: !<string> {}
                                            - name: "DATA_VALUE"
                                              type: !<string> {}
                                            - name: "MIN_VALUE"
                                              type: !<string> {}
                                            - name: "propertyName"
                                              type: !<string> {}
                                            - name: "SERVICES_RETENUS"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "RESTRICTIONS_RETENUES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                                              type: !<string> {}
                                            - name: "GARANTIES_RETENUES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                            - name: "auth"
                                              type: !<document> {}
                                            - name: "timeout"
                                              type: !<string> {}
                                            - name: "FORMULE_CONTRAT"
                                              type: !<string> {}
                                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                              type: !<string> {}
                                            - name: "FORMULE_SOUSCRITES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "PACKS_SOUSCRITS"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "TYPE_GARANTIE"
                                              type: !<string> {}
                                            - name: "coverage_attributes_element"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "coverage_attributes_elements"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "ATTRIBUTE_TYPE"
                                              type: !<string> {}
                                            - name: "SKIP_ELEMENT"
                                              type: !<string> {}
                                            - name: "TAG_EVOLVED"
                                              type: !<string> {}
                                            - name: "ELEMENT"
                                              type: !<string> {}
                                            - name: "COUVERTURES_SOUSCRITES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "packageName"
                                              type: !<string> {}
                                            - name: "_url"
                                              type: !<string> {}
                                            - name: "propertyKey"
                                              type: !<document> {}
                                            - name: "AXAContextHeader"
                                              type: !<docref>
                                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                            - name: "idContrat"
                                              type: !<string>
                                                xmlType: "string"
                                            - name: "iard.endpoint"
                                              type: !<string> {}
                                            - name: "iard.timeout"
                                              type: !<string> {}
                                            - name: "COVERAGE_REJECTED"
                                              type: !<string> {}
                                            - name: "iard.user"
                                              type: !<string> {}
                                            - name: "iard.password"
                                              type: !<string> {}
                                            - name: "type_garantie"
                                              type: !<string> {}
                                            - name: "order_by"
                                              type: !<string> {}
                                            - name: "order_direction"
                                              type: !<string> {}
                                            - name: "reponseContrat"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                            - name: "evolved"
                                              type: !<javatype>
                                                wrapperType: "java.lang.Boolean"
                                            - name: "reference"
                                              type: !<string> {}
                                            - name: "property"
                                              type: !<document> {}
                                            - name: "tns1:getCoverageResponse"
                                              type: !<docref>
                                                optional: true
                                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                            - name: "fault"
                                              type: !<document>
                                                optional: true
                                            - name: "transportInfo"
                                              type: !<document>
                                                optional: true
                                            - name: "COVERAGES_ELEMENT"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "coverage_category"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                            - name: "COMPTEUR"
                                              type: !<string> {}
                                            - name: "propertyValue"
                                              type: !<string>
                                                optional: true
                                            - name: "DATA_NAME_TRIM"
                                              type: !<string> {}
                                            - name: "DESCRIPTION"
                                              type: !<string> {}
                                            - name: "UNIT"
                                              type: !<string> {}
                                    label: "ATOUTAGE"
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges: {}
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "DEDUCTIBLE"
                                  comment: "RG264"
                              - !<SEQUENCE>
                                label: "SEUIL_DECLENCHEMENT"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<MAP>
                                    label: "ATOUTAGE"
                                    comment: "SKIP ELEMENT"
                                    nodes:
                                    - !<SetValue>
                                      to: "/SKIP_ELEMENT"
                                      value: "true"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "packageName"
                                          type: !<string> {}
                                        - name: "DATA_NAME"
                                          type: !<string> {}
                                        - name: "DATA_MIN"
                                          type: !<string> {}
                                        - name: "DATA_MAX"
                                          type: !<string> {}
                                        - name: "DATA_VALUE"
                                          type: !<string> {}
                                        - name: "MIN_VALUE"
                                          type: !<string> {}
                                        - name: "propertyName"
                                          type: !<string> {}
                                        - name: "TYPE_GARANTIE"
                                          type: !<string> {}
                                        - name: "productCoverageSpecification"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                        - name: "COVERAGES_ELEMENT"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "coverage_attributes_element"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "coverage_category"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                        - name: "coverage_attributes_elements"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "COMPTEUR"
                                          type: !<string> {}
                                        - name: "COVERAGE_REJECTED"
                                          type: !<string> {}
                                        - name: "ELEMENT"
                                          type: !<string> {}
                                        - name: "propertyValue"
                                          type: !<string>
                                            optional: true
                                        - name: "ATTRIBUTE_TYPE"
                                          type: !<string> {}
                                        - name: "DATA_NAME_TRIM"
                                          type: !<string> {}
                                        - name: "DESCRIPTION"
                                          type: !<string> {}
                                        - name: "SKIP_ELEMENT"
                                          type: !<string> {}
                                        - name: "UNIT"
                                          type: !<string> {}
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "numeric_value"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Double"
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphSeuilDeclenchementAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<Copy>
                                        from: "/numeric_value"
                                        to: "/coverage_attributes_element/numeric_value"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "APPLICATION_THRESHOLD"
                                  comment: "RG263"
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%SKIP_ELEMENT% != \"true\""
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "DROP SKIP ELEMENT"
                                nodes:
                                - !<Drop>
                                  path: "/SKIP_ELEMENT"
                              - !<SEQUENCE>
                                comment: "USE CASE TAG"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "USE CASE"
                                  nodes:
                                  - !<Copy>
                                    from: "/DATA_NAME_TRIM"
                                    to: "/coverage_attributes_element/use_case"
                                  pipelineChanges: {}
                              - !<MAP>
                                comment: "REMOVE NULL FIELDS"
                                nodes:
                                - !<Transformer>
                                  serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element/use_case"
                                      to: "/inputValue"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/outputValue"
                                      to: "/coverage_attributes_element/use_case"
                                pipelineChanges: {}
                              - !<MAP>
                                comment: "CLONE ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.utils:deepClone"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element"
                                      to: "/originalObject"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/clonedObject"
                                      to: "/coverage_attributes_element_CLONE"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "coverage_attributes_element_CLONE"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - !<MAP>
                                comment: "TO LIST ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.list:appendToDocumentList"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element_CLONE"
                                      to: "/fromItem"
                                    - !<Copy>
                                      from: "/coverage_attributes_elements"
                                      to: "/toList"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/toList"
                                      to: "/coverage_attributes_elements"
                                pipelineChanges: {}
                            - !<SEQUENCE>
                              label: "$default"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP> {}
                  - !<MAP>
                    comment: "PREPARE CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements"
                      to: "/ATTRIBUTE_LIST/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document>
                            fields:
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - !<MAP>
                    comment: "CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/ATTRIBUTE_LIST"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/ATTRIBUTE_LIST_CLONE"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                  - !<MAP>
                    comment: "EXTRACT CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/ATTRIBUTE_LIST_CLONE/coverage_attributes_elements"
                      to: "/coverage_attributes_elements_CLONE"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                  - !<MAP>
                    comment: "ATTACH ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements_CLONE"
                      to: "/COVERAGES_ELEMENT/coverage_attributes"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "EVOLVED TAG"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY TAG EVOLVED TRUE FOR PACKS"
                    nodes:
                    - !<SetValue>
                      to: "/TAG_EVOLVED"
                      value: true
                      performVariableSubstitution: true
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "DATA_MIN"
                          type: !<string> {}
                        - name: "DATA_MAX"
                          type: !<string> {}
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "MIN_VALUE"
                          type: !<string> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "tns1:getCoverageResponse"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "numeric_value"
                          type: !<javatype>
                            wrapperType: "java.lang.Double"
                - !<SEQUENCE>
                  comment: "CLEAN EMPTY VALUES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "NEW REPLACE"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/specification_name"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/description"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ADD ELEMENT TO LIST"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY EVOLVED TYPE"
                    nodes:
                    - !<Copy>
                      from: "/TAG_EVOLVED"
                      to: "/COVERAGES_ELEMENT/evolved"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "CLONE GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/COVERAGES_ELEMENT_CLONE"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - !<MAP>
                    comment: "TO LIST GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT_CLONE"
                          to: "/fromItem"
                        - !<Copy>
                          from: "/COVERAGES_ELEMENTS"
                          to: "/toList"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/COVERAGES_ELEMENTS"
                    pipelineChanges: {}
                  - !<EXIT>
                    signalFailure: false
                    from: "LOOP"
          - !<LOOP>
            inputArray: "/COUVERTURES_SOUSCRITES"
            nodes:
            - !<BRANCH>
              evaluateLabels: true
              nodes:
              - !<SEQUENCE>
                label: "%reponseContrat/productCoverageSpecification/@key% == %COUVERTURES_SOUSCRITES/@ProductSpecificationReference%"
                exitOn: "FAILURE"
                nodes:
                - !<SEQUENCE>
                  comment: "HAUT NIVEAU DE GARANTIE DESCRIPTIONS"
                  exitOn: "FAILURE"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/reponseContrat/productCoverageSpecification/@key"
                    nodes:
                    - !<MAP>
                      label: "AT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE ELEMENT"
                    nodes:
                    - !<Drop>
                      path: "/COVERAGES_ELEMENT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE CATEGORY"
                    nodes:
                    - !<Drop>
                      path: "/coverage_category"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "NOUVEAU MAPPING GARANTIE PARENT"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/@key"
                      to: "/COVERAGES_ELEMENT/specification_id"
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/tns:name"
                      to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Copy>
                      from: "/TYPE_GARANTIE"
                      to: "/COVERAGES_ELEMENT/coverage_type"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - !<MAP>
                    comment: "DESCRIPTION ELEMENT PARENT"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/@key"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "DESCRIPTION COVERAGE CATEGORY"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                      to: "/coverage_category/id"
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/coverage_category/label"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                  - !<MAP>
                    comment: "CLEAN EMPTY CATEGORY DESCIRPTION"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverage_category/label"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/coverage_category/label"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "LINK ATTRIBUTE TO PARENT"
                    nodes:
                    - !<Copy>
                      from: "/coverage_category"
                      to: "/COVERAGES_ELEMENT/coverage_category(1)"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "MARKETING ORDER"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "getCoverageAutoByReferenceWsFromReferential | rank"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/@key"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/rank"
                          to: "/COVERAGES_ELEMENT/marketing_order"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ATTRIBUTES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "INIT LIST ATTRIBUTES ELEMENTS VIDE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap> {}
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "DATA_MIN"
                          type: !<string> {}
                        - name: "DATA_MAX"
                          type: !<string> {}
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "MIN_VALUE"
                          type: !<string> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverageTmp"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "numeric_value"
                          type: !<javatype>
                            wrapperType: "java.lang.Double"
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                  - !<LOOP>
                    inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification"
                    nodes:
                    - !<LOOP>
                      inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues"
                      nodes:
                      - !<MAP>
                        comment: "CLEAN ATTRIBUTE"
                        nodes:
                        - !<Drop>
                          path: "/ELEMENT"
                        - !<Drop>
                          path: "/UNIT"
                        - !<Drop>
                          path: "/DESCRIPTION"
                        - !<Drop>
                          path: "/DATA_NAME_TRIM"
                        - !<Drop>
                          path: "/propertyValue"
                        - !<Drop>
                          path: "/DATA_NAME"
                        - !<Drop>
                          path: "/DATA_VALUE"
                        - !<Drop>
                          path: "/coverage_attributes_element"
                        pipelineChanges: {}
                      - !<SEQUENCE>
                        comment: "COVERAGE REJECTED ?"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "INIT COVERAGE REJECTED FALSE"
                          nodes:
                          - !<SetValue>
                            to: "/COVERAGE_REJECTED"
                            value: "false"
                          - !<Transformer>
                            serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAttributesToMaskFromReferential"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/coverageAttributesToMask"
                                to: "/coverageAttributesToMask"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "ATTRIBUTE_LIST"
                                type: !<document> {}
                              - name: "DATA_MIN"
                                type: !<string> {}
                              - name: "DATA_MAX"
                                type: !<string> {}
                              - name: "MIN_VALUE"
                                type: !<string> {}
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string>
                                  picklistChoices:
                                  - "AUTO"
                                  - "HOME"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "coverage_attributes_element_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_LIST_CLONE"
                                type: !<document> {}
                              - name: "coverage_attributes_elements_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "coverageTmp"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "COVERAGES_ELEMENT_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "TAG_EVOLVED"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "numeric_value"
                                type: !<javatype>
                                  wrapperType: "java.lang.Double"
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                        - !<LOOP>
                          inputArray: "/coverageAttributesToMask"
                          nodes:
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key%\
                                \ == %coverageAttributesToMask/attribute_key%"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "REJECT TRUE"
                                nodes:
                                - !<SetValue>
                                  to: "/COVERAGE_REJECTED"
                                  value: "true"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "AXAContextHeader"
                                      type: !<docref>
                                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                    - name: "SERVICES_RETENUS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "RESTRICTIONS_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                                      type: !<string> {}
                                    - name: "GARANTIES_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                    - name: "idContrat"
                                      type: !<string>
                                        xmlType: "string"
                                    - name: "type_garantie"
                                      type: !<string> {}
                                    - name: "FORMULE_CONTRAT"
                                      type: !<string> {}
                                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                      type: !<string> {}
                                    - name: "FORMULE_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "PACKS_SOUSCRITS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "TYPE_GARANTIE"
                                      type: !<string> {}
                                    - name: "coverage_attributes_elements"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                    - name: "TAG_EVOLVED"
                                      type: !<string> {}
                                    - name: "COUVERTURES_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "order_by"
                                      type: !<string> {}
                                    - name: "order_direction"
                                      type: !<string> {}
                                    - name: "evolved"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Boolean"
                                    - name: "reference"
                                      type: !<string> {}
                                    - name: "reponseContrat"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                    - name: "tns1:getCoverageResponse"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                    - name: "COVERAGES_ELEMENT"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "COVERAGE_REJECTED"
                                      type: !<string> {}
                                    - name: "coverage_category"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                    - name: "coverageAttributesToMask"
                                      type: !<document> {}
                              - !<EXIT>
                                signalFailure: false
                                from: "LOOP"
                      - !<BRANCH>
                        switchProperty: "/COVERAGE_REJECTED"
                        nodes:
                        - !<SEQUENCE>
                          label: "false"
                          exitOn: "FAILURE"
                          nodes:
                          - !<MAP>
                            comment: "NOUVEAU MAPPING ATTRIBUTE"
                            nodes:
                            - !<Copy>
                              from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataType"
                              to: "/coverage_attributes_element/type"
                            - !<Transformer>
                              serviceName: "AFS_common_apiweb_v1.pub.number:toDoubleClean"
                              input: !<InputMap>
                                nodes:
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                  to: "/input"
                              output: !<OutputMap>
                                nodes:
                                - !<Copy>
                                  from: "/roundedNumber"
                                  to: "/coverage_attributes_element/numeric_value"
                            pipelineChanges:
                              added: !<document>
                                fields:
                                - name: "coverage_attributes_element"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - !<SEQUENCE>
                            comment: "DEFINITION DU TYPE D'ATTRIBUT"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              comment: "INIT TYPE ATTRIBUTE RESET UNIT TYPE"
                              nodes:
                              - !<SetValue>
                                to: "/ATTRIBUTE_TYPE"
                                value: ""
                              - !<Drop>
                                path: "/UNIT"
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/*doctype"
                              nodes:
                              - !<SEQUENCE>
                                label: "/LimitSpecification_Type/"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                  nodes:
                                  - !<SEQUENCE>
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$null"
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$default"
                                    comment: "SEUIL"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "SEUIL"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "SEUIL_DECLENCHEMENT"
                              - !<SEQUENCE>
                                label: "/DeductibleSpecification_Type/"
                                comment: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "PLAFOND"
                                  nodes:
                                  - !<SetValue>
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "FRANCHISE"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          optional: true
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "SERVICES_RETENUS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "RESTRICTIONS_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                                        type: !<string> {}
                                      - name: "GARANTIES_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                      - name: "FORMULE_CONTRAT"
                                        type: !<string> {}
                                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                        type: !<string> {}
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "TYPE_GARANTIE"
                                        type: !<string> {}
                                      - name: "TAG_EVOLVED"
                                        type: !<string> {}
                                      - name: "coverage_attributes_elements"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "COVERAGES_ELEMENT"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              comment: "EXTRACT TYPE"
                            - !<MAP>
                              comment: "CLEAN RESULTS"
                              nodes:
                              - !<Drop>
                                path: "/DATA_NAME_TRIM(1)"
                              - !<Drop>
                                path: "/UNIT"
                              - !<Drop>
                                path: "/DESCRIPTION(1)"
                              - !<Drop>
                                path: "/SKIP_ELEMENT(1)"
                              - !<Drop>
                                path: "/SKIP_ELEMENT"
                              pipelineChanges: {}
                            - !<MAP>
                              comment: "RESET SKIP ELEMENT"
                              nodes:
                              - !<SetValue>
                                to: "/SKIP_ELEMENT"
                                value: "false"
                            - !<BRANCH>
                              switchProperty: "/ATTRIBUTE_TYPE"
                              nodes:
                              - !<SEQUENCE>
                                label: "PLAFOND"
                                exitOn: "FAILURE"
                                nodes:
                                - !<INVOKE>
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "DATA_NAME"
                                        type: !<string> {}
                                      - name: "DATA_VALUE"
                                        type: !<string> {}
                                      - name: "UNIT"
                                        type: !<string> {}
                                  serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                      to: "/DATA_NAME"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                      to: "/DATA_VALUE"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/DATA_MIN"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                      to: "/DATA_MAX"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/MIN_VALUE"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/DESCRIPTION"
                                      to: "/coverage_attributes_element/description"
                                    - !<Copy>
                                      from: "/UNIT"
                                      to: "/coverage_attributes_element/unit"
                                    - !<SetValue>
                                      to: "/coverage_attributes_element/type"
                                      value: "LIMIT"
                              - !<SEQUENCE>
                                label: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<BRANCH>
                                    evaluateLabels: true
                                    nodes:
                                    - !<SEQUENCE>
                                      label: "%coverage_attributes_element/type% !=\
                                        \ \"EUR\""
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                        pipelineChanges:
                                          added: !<document>
                                            fields:
                                            - name: "packageName"
                                              type: !<string> {}
                                            - name: "DATA_NAME"
                                              type: !<string> {}
                                            - name: "DATA_MIN"
                                              type: !<string> {}
                                            - name: "DATA_MAX"
                                              type: !<string> {}
                                            - name: "DATA_VALUE"
                                              type: !<string> {}
                                            - name: "MIN_VALUE"
                                              type: !<string> {}
                                            - name: "propertyName"
                                              type: !<string> {}
                                            - name: "TYPE_GARANTIE"
                                              type: !<string> {}
                                            - name: "productCoverageSpecification"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                            - name: "COVERAGES_ELEMENT"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "coverage_attributes_element"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "coverage_category"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                            - name: "coverage_attributes_elements"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "COMPTEUR"
                                              type: !<string> {}
                                            - name: "COVERAGE_REJECTED"
                                              type: !<string> {}
                                            - name: "ELEMENT"
                                              type: !<string> {}
                                            - name: "propertyValue"
                                              type: !<string>
                                                optional: true
                                            - name: "ATTRIBUTE_TYPE"
                                              type: !<string> {}
                                            - name: "DATA_NAME_TRIM"
                                              type: !<string> {}
                                            - name: "DESCRIPTION"
                                              type: !<string> {}
                                            - name: "UNIT"
                                              type: !<string> {}
                                            - name: "SKIP_ELEMENT"
                                              type: !<string> {}
                                    - !<SEQUENCE>
                                      label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue%\
                                        \ != 0"
                                      comment: "RG264"
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                    label: "ATOUTAGE"
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges: {}
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "DEDUCTIBLE"
                                  comment: "RG264"
                              - !<SEQUENCE>
                                label: "SEUIL_DECLENCHEMENT"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<MAP>
                                    label: "ATOUTAGE"
                                    comment: "SKIP ELEMENT"
                                    nodes:
                                    - !<SetValue>
                                      to: "/SKIP_ELEMENT"
                                      value: "true"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "tns1:getCoverage"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                                        - name: "DATA_NAME"
                                          type: !<string> {}
                                        - name: "propertyName"
                                          type: !<string> {}
                                        - name: "ATTRIBUTE_LIST"
                                          type: !<document> {}
                                        - name: "DATA_VALUE"
                                          type: !<string> {}
                                        - name: "DATA_MIN"
                                          type: !<string> {}
                                        - name: "DATA_MAX"
                                          type: !<string> {}
                                        - name: "MIN_VALUE"
                                          type: !<string> {}
                                        - name: "SERVICES_RETENUS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "RESTRICTIONS_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                                          type: !<string> {}
                                        - name: "GARANTIES_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                        - name: "auth"
                                          type: !<document> {}
                                        - name: "timeout"
                                          type: !<string> {}
                                        - name: "coverage_attributes_element_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "FORMULE_CONTRAT"
                                          type: !<string> {}
                                        - name: "COVERAGES_ELEMENT"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "COVERAGES_ELEMENTS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "ATTRIBUTE_LIST_CLONE"
                                          type: !<document> {}
                                        - name: "coverage_attributes_elements_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "coverage_attributes_element"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                          type: !<string> {}
                                        - name: "FORMULE_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "PACKS_SOUSCRITS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "TYPE_GARANTIE"
                                          type: !<string> {}
                                        - name: "coverage_attributes_elements"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "COVERAGES_ELEMENT_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "ATTRIBUTE_TYPE"
                                          type: !<string> {}
                                        - name: "TAG_EVOLVED"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Boolean"
                                        - name: "ELEMENT"
                                          type: !<string> {}
                                        - name: "COUVERTURES_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "packageName"
                                          type: !<string> {}
                                        - name: "_url"
                                          type: !<string> {}
                                        - name: "propertyKey"
                                          type: !<document> {}
                                        - name: "AXAContextHeader"
                                          type: !<docref>
                                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                        - name: "idContrat"
                                          type: !<string>
                                            xmlType: "string"
                                        - name: "iard.endpoint"
                                          type: !<string> {}
                                        - name: "iard.timeout"
                                          type: !<string> {}
                                        - name: "COVERAGE_REJECTED"
                                          type: !<string> {}
                                        - name: "iard.user"
                                          type: !<string> {}
                                        - name: "iard.password"
                                          type: !<string> {}
                                        - name: "type_garantie"
                                          type: !<string> {}
                                        - name: "order_by"
                                          type: !<string> {}
                                        - name: "order_direction"
                                          type: !<string> {}
                                        - name: "reponseContrat"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                        - name: "evolved"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Boolean"
                                        - name: "reference"
                                          type: !<string> {}
                                        - name: "property"
                                          type: !<document> {}
                                        - name: "tns1:getCoverageResponse"
                                          type: !<docref>
                                            optional: true
                                            xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                        - name: "fault"
                                          type: !<document>
                                            optional: true
                                        - name: "transportInfo"
                                          type: !<document>
                                            optional: true
                                        - name: "COMPTEUR"
                                          type: !<string> {}
                                        - name: "coverage_category"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                        - name: "numeric_value"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Double"
                                        - name: "propertyValue"
                                          type: !<string>
                                            optional: true
                                        - name: "DATA_NAME_TRIM"
                                          type: !<string> {}
                                        - name: "DESCRIPTION"
                                          type: !<string> {}
                                        - name: "SKIP_ELEMENT"
                                          type: !<string> {}
                                        - name: "UNIT"
                                          type: !<string> {}
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges: {}
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphSeuilDeclenchementAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<Copy>
                                        from: "/numeric_value"
                                        to: "/coverage_attributes_element/numeric_value"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "APPLICATION_THRESHOLD"
                                  comment: "RG263"
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%SKIP_ELEMENT% != \"true\""
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "DROP SKIP ELEMENT"
                                nodes:
                                - !<Drop>
                                  path: "/SKIP_ELEMENT"
                                pipelineChanges: {}
                              - !<SEQUENCE>
                                comment: "USE CASE TAG"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "USE CASE"
                                  nodes:
                                  - !<Copy>
                                    from: "/DATA_NAME_TRIM"
                                    to: "/coverage_attributes_element/use_case"
                                  pipelineChanges: {}
                              - !<MAP>
                                comment: "REMOVE NULL FIELDS"
                                nodes:
                                - !<Transformer>
                                  serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element/use_case"
                                      to: "/inputValue"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/outputValue"
                                      to: "/coverage_attributes_element/use_case"
                                pipelineChanges: {}
                              - !<MAP>
                                comment: "CLONE ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.utils:deepClone"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element"
                                      to: "/originalObject"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/clonedObject"
                                      to: "/coverage_attributes_element_CLONE"
                                pipelineChanges: {}
                              - !<MAP>
                                comment: "TO LIST ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.list:appendToDocumentList"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element_CLONE"
                                      to: "/fromItem"
                                    - !<Copy>
                                      from: "/coverage_attributes_elements"
                                      to: "/toList"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/toList"
                                      to: "/coverage_attributes_elements"
                                pipelineChanges: {}
                            - !<SEQUENCE>
                              label: "$default"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP> {}
                  - !<MAP>
                    comment: "PREPARE CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements"
                      to: "/ATTRIBUTE_LIST/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document>
                            fields:
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - !<MAP>
                    comment: "CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/ATTRIBUTE_LIST"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/ATTRIBUTE_LIST_CLONE"
                    pipelineChanges:
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document>
                            fields:
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - !<MAP>
                    comment: "EXTRACT CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/ATTRIBUTE_LIST_CLONE/coverage_attributes_elements"
                      to: "/coverage_attributes_elements_CLONE"
                    pipelineChanges:
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                  - !<MAP>
                    comment: "ATTACH ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements_CLONE"
                      to: "/COVERAGES_ELEMENT/coverage_attributes"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "EVOLVED TAG"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY TAG EVOLVED"
                    nodes:
                    - !<SetValue>
                      to: "/TAG_EVOLVED"
                      value: false
                      performVariableSubstitution: true
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "DATA_MIN"
                          type: !<string> {}
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "DATA_MAX"
                          type: !<string> {}
                        - name: "MIN_VALUE"
                          type: !<string> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "tns1:getCoverageResponse"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "numeric_value"
                          type: !<javatype>
                            wrapperType: "java.lang.Double"
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                  - !<LOOP>
                    inputArray: "/tns1:getCoverageResponse/reponseContrat/productOption"
                    nodes:
                    - !<SEQUENCE>
                      comment: "REGLE 1"
                      exitOn: "FAILURE"
                      nodes:
                      - !<BRANCH>
                        evaluateLabels: true
                        nodes:
                        - !<SEQUENCE>
                          label: "%tns1:getCoverageResponse/reponseContrat/productOption/tns:kindOfElementName%\
                            \ != null && %tns:getCoverageResponse/reponseContrat/productOption/tns:kindOfElementName%\
                            \ != \"\""
                          exitOn: "FAILURE"
                          nodes:
                          - !<MAP>
                            comment: "APPLY TAG EVOLVED TRUE"
                            nodes:
                            - !<SetValue>
                              to: "/TAG_EVOLVED"
                              value: true
                              performVariableSubstitution: true
                            pipelineChanges:
                              added: !<document>
                                fields:
                                - name: "AXAContextHeader"
                                  type: !<docref>
                                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                - name: "DATA_NAME"
                                  type: !<string> {}
                                - name: "ATTRIBUTE_LIST"
                                  type: !<document> {}
                                - name: "DATA_MIN"
                                  type: !<string> {}
                                - name: "DATA_VALUE"
                                  type: !<string> {}
                                - name: "DATA_MAX"
                                  type: !<string> {}
                                - name: "MIN_VALUE"
                                  type: !<string> {}
                                - name: "SERVICES_RETENUS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "RESTRICTIONS_RETENUES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "NIVEAU_COUVERTURE_CONTRAT"
                                  type: !<string> {}
                                - name: "GARANTIES_RETENUES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                - name: "idContrat"
                                  type: !<string>
                                    xmlType: "string"
                                - name: "policy_type"
                                  type: !<string>
                                    picklistChoices:
                                    - "AUTO"
                                    - "HOME"
                                - name: "FORMULE_CONTRAT"
                                  type: !<string> {}
                                - name: "coverage_attributes_element_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                  type: !<string> {}
                                - name: "COVERAGES_ELEMENT"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "COVERAGES_ELEMENTS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "ATTRIBUTE_LIST_CLONE"
                                  type: !<document> {}
                                - name: "coverage_attributes_elements_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "coverage_attributes_element"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "FORMULE_SOUSCRITES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "PACKS_SOUSCRITS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "TYPE_GARANTIE"
                                  type: !<string> {}
                                - name: "coverage_attributes_elements"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "COUVERTURES_SOUSCRITES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "COVERAGES_ELEMENT_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "ATTRIBUTE_TYPE"
                                  type: !<string> {}
                                - name: "type_garantie"
                                  type: !<string> {}
                                - name: "order_by"
                                  type: !<string> {}
                                - name: "order_direction"
                                  type: !<string> {}
                                - name: "evolved"
                                  type: !<javatype>
                                    wrapperType: "java.lang.Boolean"
                                - name: "TAG_EVOLVED"
                                  type: !<javatype>
                                    wrapperType: "java.lang.Boolean"
                                - name: "reference"
                                  type: !<string> {}
                                - name: "reponseContrat"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                - name: "tns1:getCoverageResponse"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                - name: "COVERAGE_REJECTED"
                                  type: !<string> {}
                                - name: "coverageAttributesToMask"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                - name: "numeric_value"
                                  type: !<javatype>
                                    wrapperType: "java.lang.Double"
                                - name: "coverage_category"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                - name: "DATA_NAME_TRIM"
                                  type: !<string> {}
                                - name: "DESCRIPTION"
                                  type: !<string> {}
                                - name: "UNIT"
                                  type: !<string> {}
                          - !<EXIT>
                            signalFailure: false
                            from: "LOOP"
                    - !<SEQUENCE>
                      comment: "REGLE 2"
                      exitOn: "FAILURE"
                      nodes:
                      - !<LOOP>
                        inputArray: "/tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf"
                        nodes:
                        - !<MAP> {}
                        - !<BRANCH>
                          evaluateLabels: true
                          nodes:
                          - !<SEQUENCE>
                            label: "%COVERAGES_ELEMENT/specification_id% == %tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/@ProductSpecificationReference%"
                            exitOn: "FAILURE"
                            nodes:
                            - !<BRANCH>
                              evaluateLabels: true
                              nodes:
                              - !<SEQUENCE>
                                label: "%tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                  \ == 0 || %tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                  \ == \"0\""
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "APPLY TAG EVOLVED TRUE"
                                  nodes:
                                  - !<SetValue>
                                    to: "/TAG_EVOLVED"
                                    value: true
                                    performVariableSubstitution: true
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "AXAContextHeader"
                                        type: !<docref>
                                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                      - name: "DATA_NAME"
                                        type: !<string> {}
                                      - name: "ATTRIBUTE_LIST"
                                        type: !<document> {}
                                      - name: "DATA_MIN"
                                        type: !<string> {}
                                      - name: "DATA_VALUE"
                                        type: !<string> {}
                                      - name: "DATA_MAX"
                                        type: !<string> {}
                                      - name: "MIN_VALUE"
                                        type: !<string> {}
                                      - name: "SERVICES_RETENUS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "RESTRICTIONS_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                                        type: !<string> {}
                                      - name: "GARANTIES_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                      - name: "idContrat"
                                        type: !<string>
                                          xmlType: "string"
                                      - name: "policy_type"
                                        type: !<string>
                                          picklistChoices:
                                          - "AUTO"
                                          - "HOME"
                                      - name: "FORMULE_CONTRAT"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                        type: !<string> {}
                                      - name: "COVERAGES_ELEMENT"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "COVERAGES_ELEMENTS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_LIST_CLONE"
                                        type: !<document> {}
                                      - name: "coverage_attributes_elements_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "TYPE_GARANTIE"
                                        type: !<string> {}
                                      - name: "coverage_attributes_elements"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COVERAGES_ELEMENT_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                                      - name: "type_garantie"
                                        type: !<string> {}
                                      - name: "order_by"
                                        type: !<string> {}
                                      - name: "order_direction"
                                        type: !<string> {}
                                      - name: "evolved"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "TAG_EVOLVED"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "reference"
                                        type: !<string> {}
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "tns1:getCoverageResponse"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                      - name: "COVERAGE_REJECTED"
                                        type: !<string> {}
                                      - name: "coverageAttributesToMask"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                      - name: "numeric_value"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Double"
                                      - name: "coverage_category"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                      - name: "DATA_NAME_TRIM"
                                        type: !<string> {}
                                      - name: "DESCRIPTION"
                                        type: !<string> {}
                                      - name: "UNIT"
                                        type: !<string> {}
                                - !<EXIT>
                                  signalFailure: false
                                  from: "LOOP"
                - !<SEQUENCE>
                  comment: "CLEAN EMPTY VALUES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "NEW REPLACE"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/specification_name"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/description"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ADD ELEMENT TO LIST"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY EVOLVED TYPE"
                    nodes:
                    - !<Copy>
                      from: "/TAG_EVOLVED(0)"
                      to: "/COVERAGES_ELEMENT/evolved"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "CLONE GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/COVERAGES_ELEMENT_CLONE"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "TO LIST GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT_CLONE"
                          to: "/fromItem"
                        - !<Copy>
                          from: "/COVERAGES_ELEMENTS"
                          to: "/toList"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/COVERAGES_ELEMENTS"
                    pipelineChanges: {}
                  - !<EXIT>
                    signalFailure: false
                    from: "LOOP"
                  - !<MAP> {}
          - !<LOOP>
            inputArray: "/FORMULE_SOUSCRITES"
            nodes:
            - !<BRANCH>
              evaluateLabels: true
              nodes:
              - !<SEQUENCE>
                label: "%reponseContrat/productCoverageSpecification/@key% == %FORMULE_SOUSCRITES/@ProductSpecificationReference%"
                exitOn: "FAILURE"
                nodes:
                - !<SEQUENCE>
                  comment: "HAUT NIVEAU DE GARANTIE DESCRIPTIONS"
                  exitOn: "FAILURE"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/reponseContrat/productCoverageSpecification/@key"
                    nodes:
                    - !<MAP>
                      label: "AT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE ELEMENT"
                    nodes:
                    - !<Drop>
                      path: "/COVERAGES_ELEMENT"
                  - !<MAP>
                    comment: "CLEAN COVERAGE CATEGORY"
                    nodes:
                    - !<Drop>
                      path: "/coverage_category"
                  - !<MAP>
                    comment: "NOUVEAU MAPPING GARANTIE PARENT"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/@key"
                      to: "/COVERAGES_ELEMENT/specification_id"
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/tns:name"
                      to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Copy>
                      from: "/TYPE_GARANTIE"
                      to: "/COVERAGES_ELEMENT/coverage_type"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - !<MAP>
                    comment: "DESCRIPTION ELEMENT PARENT"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/specification_id"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "DESCRIPTION COVERAGE CATEGORY"
                    nodes:
                    - !<Copy>
                      from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                      to: "/coverage_category/id"
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/ns1:coverageCategoryCode"
                          to: "/reference_ws"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/description_simple"
                          to: "/coverage_category/label"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                  - !<MAP>
                    comment: "CLEAN EMPTY CATEGORY DESCIRPTION"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverage_category/label"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/coverage_category/label"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "LINK ATTRIBUTE TO PARENT"
                    nodes:
                    - !<Copy>
                      from: "/coverage_category"
                      to: "/COVERAGES_ELEMENT/coverage_category(1)"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "MARKETING ORDER"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "getCoverageAutoByReferenceWsFromReferential | rank"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAutoByReferenceWsFromReferential"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/reponseContrat/productCoverageSpecification/@key"
                          to: "/reference_ws"
                        - !<Copy>
                          from: "/policy_type"
                          to: "/policy_type"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/coverageAuto/rank"
                          to: "/COVERAGES_ELEMENT/marketing_order"
                    pipelineChanges: {}
                  - !<BRANCH>
                    switchProperty: "/propertyValue"
                    nodes:
                    - !<SEQUENCE>
                      exitOn: "FAILURE"
                    - !<SEQUENCE>
                      label: "$null"
                      exitOn: "FAILURE"
                    - !<SEQUENCE>
                      label: "N/A"
                      exitOn: "FAILURE"
                    - !<SEQUENCE>
                      label: "$default"
                      exitOn: "FAILURE"
                      nodes:
                      - !<MAP>
                        comment: "TO NUMBER"
                        nodes:
                        - !<Transformer>
                          serviceName: "pub.math:toNumber"
                          input: !<InputMap>
                            nodes:
                            - !<SetValue>
                              to: "/convertAs"
                              value: "java.lang.Integer"
                            - !<Copy>
                              from: "/propertyValue"
                              to: "/num"
                          output: !<OutputMap>
                            nodes:
                            - !<Copy>
                              from: "/num"
                              to: "/COVERAGES_ELEMENT/marketing_order"
                        - !<Drop>
                          path: "/propertyName"
                        - !<Drop>
                          path: "/propertyValue"
                        pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ATTRIBUTES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "INIT LIST ATTRIBUTES ELEMENTS VIDE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap> {}
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "DATA_MIN"
                          type: !<string> {}
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "DATA_MAX"
                          type: !<string> {}
                        - name: "MIN_VALUE"
                          type: !<string> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverageTmp"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "numeric_value"
                          type: !<javatype>
                            wrapperType: "java.lang.Double"
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                  - !<LOOP>
                    inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification"
                    nodes:
                    - !<LOOP>
                      inputArray: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues"
                      nodes:
                      - !<MAP>
                        comment: "CLEAN ATTRIBUTE"
                        nodes:
                        - !<Drop>
                          path: "/ELEMENT"
                        - !<Drop>
                          path: "/UNIT"
                        - !<Drop>
                          path: "/DESCRIPTION"
                        - !<Drop>
                          path: "/DATA_NAME_TRIM"
                        - !<Drop>
                          path: "/propertyValue"
                        - !<Drop>
                          path: "/DATA_NAME"
                        - !<Drop>
                          path: "/DATA_VALUE"
                        - !<Drop>
                          path: "/coverage_attributes_element"
                      - !<SEQUENCE>
                        comment: "COVERAGE REJECTED ?"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "INIT COVERAGE REJECTED FALSE"
                          nodes:
                          - !<SetValue>
                            to: "/COVERAGE_REJECTED"
                            value: "false"
                          - !<Transformer>
                            serviceName: "AFS_APIWEB_To_Configuration_v1.pub.referential.Coverage:getCoverageAttributesToMaskFromReferential"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/coverageAttributesToMask"
                                to: "/coverageAttributesToMask"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "ATTRIBUTE_LIST"
                                type: !<document> {}
                              - name: "DATA_MIN"
                                type: !<string> {}
                              - name: "DATA_MAX"
                                type: !<string> {}
                              - name: "MIN_VALUE"
                                type: !<string> {}
                              - name: "SERVICES_RETENUS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "RESTRICTIONS_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "NIVEAU_COUVERTURE_CONTRAT"
                                type: !<string> {}
                              - name: "GARANTIES_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string> {}
                              - name: "FORMULE_CONTRAT"
                                type: !<string> {}
                              - name: "coverage_attributes_element_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_LIST_CLONE"
                                type: !<document> {}
                              - name: "coverage_attributes_elements_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "TAG_EVOLVED"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "COVERAGES_ELEMENT_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "tns1:getCoverageResponse"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                              - name: "reference"
                                type: !<string> {}
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "numeric_value"
                                type: !<javatype>
                                  wrapperType: "java.lang.Double"
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - !<LOOP>
                          inputArray: "/coverageAttributesToMask"
                          nodes:
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key%\
                                \ == %coverageAttributesToMask/attribute_key%"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "REJECT TRUE"
                                nodes:
                                - !<SetValue>
                                  to: "/COVERAGE_REJECTED"
                                  value: "true"
                                pipelineChanges:
                                  added: !<document>
                                    fields:
                                    - name: "AXAContextHeader"
                                      type: !<docref>
                                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                    - name: "SERVICES_RETENUS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "RESTRICTIONS_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                                      type: !<string> {}
                                    - name: "GARANTIES_RETENUES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                    - name: "idContrat"
                                      type: !<string>
                                        xmlType: "string"
                                    - name: "type_garantie"
                                      type: !<string> {}
                                    - name: "FORMULE_CONTRAT"
                                      type: !<string> {}
                                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                      type: !<string> {}
                                    - name: "FORMULE_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "PACKS_SOUSCRITS"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "TYPE_GARANTIE"
                                      type: !<string> {}
                                    - name: "coverage_attributes_elements"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                    - name: "TAG_EVOLVED"
                                      type: !<string> {}
                                    - name: "COUVERTURES_SOUSCRITES"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                    - name: "order_by"
                                      type: !<string> {}
                                    - name: "order_direction"
                                      type: !<string> {}
                                    - name: "evolved"
                                      type: !<javatype>
                                        wrapperType: "java.lang.Boolean"
                                    - name: "reference"
                                      type: !<string> {}
                                    - name: "reponseContrat"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                    - name: "tns1:getCoverageResponse"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                    - name: "COVERAGES_ELEMENT"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                    - name: "COVERAGE_REJECTED"
                                      type: !<string> {}
                                    - name: "coverage_category"
                                      type: !<docref>
                                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                    - name: "coverageAttributesToMask"
                                      type: !<document> {}
                              - !<EXIT>
                                signalFailure: false
                                from: "LOOP"
                      - !<BRANCH>
                        switchProperty: "/COVERAGE_REJECTED"
                        nodes:
                        - !<SEQUENCE>
                          label: "false"
                          exitOn: "FAILURE"
                          nodes:
                          - !<MAP>
                            comment: "NOUVEAU MAPPING ATTRIBUTE"
                            nodes:
                            - !<Copy>
                              from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataType"
                              to: "/coverage_attributes_element/type"
                            - !<Transformer>
                              serviceName: "AFS_common_apiweb_v1.pub.number:toDoubleClean"
                              input: !<InputMap>
                                nodes:
                                - !<Copy>
                                  from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                  to: "/input"
                              output: !<OutputMap>
                                nodes:
                                - !<Copy>
                                  from: "/roundedNumber"
                                  to: "/coverage_attributes_element/numeric_value"
                            pipelineChanges:
                              added: !<document>
                                fields:
                                - name: "coverage_attributes_element"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - !<SEQUENCE>
                            comment: "DEFINITION DU TYPE D'ATTRIBUT"
                            exitOn: "FAILURE"
                            nodes:
                            - !<MAP>
                              comment: "INIT TYPE ATTRIBUTE RESET UNIT TYPE"
                              nodes:
                              - !<SetValue>
                                to: "/ATTRIBUTE_TYPE"
                                value: ""
                              - !<Drop>
                                path: "/UNIT"
                            - !<BRANCH>
                              switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/*doctype"
                              nodes:
                              - !<SEQUENCE>
                                label: "/LimitSpecification_Type/"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                  nodes:
                                  - !<SEQUENCE>
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$null"
                                    comment: "PLAFOND"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "PLAFOND"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "PLAFOND"
                                  - !<SEQUENCE>
                                    label: "$default"
                                    comment: "SEUIL"
                                    exitOn: "FAILURE"
                                    nodes:
                                    - !<MAP>
                                      comment: "SEUIL"
                                      nodes:
                                      - !<SetValue>
                                        to: "/ATTRIBUTE_TYPE"
                                        value: "SEUIL_DECLENCHEMENT"
                              - !<SEQUENCE>
                                label: "/DeductibleSpecification_Type/"
                                comment: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "PLAFOND"
                                  nodes:
                                  - !<SetValue>
                                    to: "/ATTRIBUTE_TYPE"
                                    value: "FRANCHISE"
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          optional: true
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "SERVICES_RETENUS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "RESTRICTIONS_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                                        type: !<string> {}
                                      - name: "GARANTIES_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                      - name: "FORMULE_CONTRAT"
                                        type: !<string> {}
                                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                        type: !<string> {}
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "TYPE_GARANTIE"
                                        type: !<string> {}
                                      - name: "TAG_EVOLVED"
                                        type: !<string> {}
                                      - name: "coverage_attributes_elements"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "COVERAGES_ELEMENT"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                              comment: "EXTRACT TYPE"
                            - !<MAP>
                              comment: "CLEAN RESULTS"
                              nodes:
                              - !<Drop>
                                path: "/DATA_NAME_TRIM(1)"
                              - !<Drop>
                                path: "/UNIT"
                              - !<Drop>
                                path: "/DESCRIPTION(1)"
                              - !<Drop>
                                path: "/SKIP_ELEMENT(1)"
                              - !<Drop>
                                path: "/SKIP_ELEMENT"
                              pipelineChanges: {}
                            - !<MAP>
                              comment: "RESET SKIP ELEMENT"
                              nodes:
                              - !<SetValue>
                                to: "/SKIP_ELEMENT"
                                value: "false"
                            - !<BRANCH>
                              switchProperty: "/ATTRIBUTE_TYPE"
                              nodes:
                              - !<SEQUENCE>
                                label: "PLAFOND"
                                exitOn: "FAILURE"
                                nodes:
                                - !<INVOKE>
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "DATA_NAME"
                                        type: !<string> {}
                                      - name: "DATA_VALUE"
                                        type: !<string> {}
                                      - name: "UNIT"
                                        type: !<string> {}
                                  serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                      to: "/DATA_NAME"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                      to: "/DATA_VALUE"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/DATA_MIN"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                      to: "/MIN_VALUE"
                                    - !<Copy>
                                      from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                      to: "/DATA_MAX"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/DESCRIPTION"
                                      to: "/coverage_attributes_element/description"
                                    - !<Copy>
                                      from: "/UNIT"
                                      to: "/coverage_attributes_element/unit"
                                    - !<SetValue>
                                      to: "/coverage_attributes_element/type"
                                      value: "LIMIT"
                              - !<SEQUENCE>
                                label: "FRANCHISE"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<BRANCH>
                                    evaluateLabels: true
                                    nodes:
                                    - !<SEQUENCE>
                                      label: "%coverage_attributes_element/type% !=\
                                        \ \"EUR\""
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                        pipelineChanges:
                                          added: !<document>
                                            fields:
                                            - name: "packageName"
                                              type: !<string> {}
                                            - name: "DATA_NAME"
                                              type: !<string> {}
                                            - name: "DATA_MIN"
                                              type: !<string> {}
                                            - name: "DATA_MAX"
                                              type: !<string> {}
                                            - name: "DATA_VALUE"
                                              type: !<string> {}
                                            - name: "MIN_VALUE"
                                              type: !<string> {}
                                            - name: "propertyName"
                                              type: !<string> {}
                                            - name: "TYPE_GARANTIE"
                                              type: !<string> {}
                                            - name: "productCoverageSpecification"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                            - name: "COVERAGES_ELEMENT"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "coverage_attributes_element"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "coverage_category"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                            - name: "coverage_attributes_elements"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "COMPTEUR"
                                              type: !<string> {}
                                            - name: "COVERAGE_REJECTED"
                                              type: !<string> {}
                                            - name: "ELEMENT"
                                              type: !<string> {}
                                            - name: "propertyValue"
                                              type: !<string>
                                                optional: true
                                            - name: "ATTRIBUTE_TYPE"
                                              type: !<string> {}
                                            - name: "DATA_NAME_TRIM"
                                              type: !<string> {}
                                            - name: "DESCRIPTION"
                                              type: !<string> {}
                                            - name: "UNIT"
                                              type: !<string> {}
                                            - name: "SKIP_ELEMENT"
                                              type: !<string> {}
                                    - !<SEQUENCE>
                                      label: "%reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue%\
                                        \ != 0"
                                      comment: "RG264"
                                      exitOn: "FAILURE"
                                      nodes:
                                      - !<MAP>
                                        comment: "SKIP ELEMENT"
                                        nodes:
                                        - !<SetValue>
                                          to: "/SKIP_ELEMENT"
                                          value: "true"
                                        pipelineChanges:
                                          added: !<document>
                                            fields:
                                            - name: "tns1:getCoverage"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                                            - name: "DATA_NAME"
                                              type: !<string> {}
                                            - name: "propertyName"
                                              type: !<string> {}
                                            - name: "ATTRIBUTE_LIST"
                                              type: !<document> {}
                                            - name: "DATA_VALUE"
                                              type: !<string> {}
                                            - name: "DATA_MIN"
                                              type: !<string> {}
                                            - name: "DATA_MAX"
                                              type: !<string> {}
                                            - name: "MIN_VALUE"
                                              type: !<string> {}
                                            - name: "SERVICES_RETENUS"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "RESTRICTIONS_RETENUES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                                              type: !<string> {}
                                            - name: "GARANTIES_RETENUES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                            - name: "auth"
                                              type: !<document> {}
                                            - name: "timeout"
                                              type: !<string> {}
                                            - name: "coverage_attributes_element_CLONE"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "FORMULE_CONTRAT"
                                              type: !<string> {}
                                            - name: "COVERAGES_ELEMENTS"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "ATTRIBUTE_LIST_CLONE"
                                              type: !<document> {}
                                            - name: "coverage_attributes_elements_CLONE"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                              type: !<string> {}
                                            - name: "FORMULE_SOUSCRITES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "PACKS_SOUSCRITS"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "coverage_attributes_element"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "TYPE_GARANTIE"
                                              type: !<string> {}
                                            - name: "coverage_attributes_elements"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                            - name: "COVERAGES_ELEMENT_CLONE"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "ATTRIBUTE_TYPE"
                                              type: !<string> {}
                                            - name: "TAG_EVOLVED"
                                              type: !<javatype>
                                                wrapperType: "java.lang.Boolean"
                                            - name: "COUVERTURES_SOUSCRITES"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                            - name: "packageName"
                                              type: !<string> {}
                                            - name: "_url"
                                              type: !<string> {}
                                            - name: "propertyKey"
                                              type: !<document> {}
                                            - name: "ELEMENT"
                                              type: !<string> {}
                                            - name: "AXAContextHeader"
                                              type: !<docref>
                                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                            - name: "idContrat"
                                              type: !<string>
                                                xmlType: "string"
                                            - name: "iard.endpoint"
                                              type: !<string> {}
                                            - name: "iard.timeout"
                                              type: !<string> {}
                                            - name: "COVERAGE_REJECTED"
                                              type: !<string> {}
                                            - name: "iard.user"
                                              type: !<string> {}
                                            - name: "iard.password"
                                              type: !<string> {}
                                            - name: "type_garantie"
                                              type: !<string> {}
                                            - name: "order_by"
                                              type: !<string> {}
                                            - name: "order_direction"
                                              type: !<string> {}
                                            - name: "reponseContrat"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                            - name: "evolved"
                                              type: !<javatype>
                                                wrapperType: "java.lang.Boolean"
                                            - name: "reference"
                                              type: !<string> {}
                                            - name: "property"
                                              type: !<document> {}
                                            - name: "tns1:getCoverageResponse"
                                              type: !<docref>
                                                optional: true
                                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                            - name: "fault"
                                              type: !<document>
                                                optional: true
                                            - name: "transportInfo"
                                              type: !<document>
                                                optional: true
                                            - name: "COMPTEUR"
                                              type: !<string> {}
                                            - name: "numeric_value"
                                              type: !<javatype>
                                                wrapperType: "java.lang.Double"
                                            - name: "COVERAGES_ELEMENT"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                            - name: "coverage_category"
                                              type: !<docref>
                                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                            - name: "propertyValue"
                                              type: !<string>
                                                optional: true
                                            - name: "DATA_NAME_TRIM"
                                              type: !<string> {}
                                            - name: "DESCRIPTION"
                                              type: !<string> {}
                                            - name: "SKIP_ELEMENT"
                                              type: !<string> {}
                                            - name: "UNIT"
                                              type: !<string> {}
                                    label: "ATOUTAGE"
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges: {}
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphFranchisePlafondAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "DEDUCTIBLE"
                                  comment: "RG264"
                              - !<SEQUENCE>
                                label: "SEUIL_DECLENCHEMENT"
                                exitOn: "FAILURE"
                                nodes:
                                - !<BRANCH>
                                  switchProperty: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/@key"
                                  nodes:
                                  - !<MAP>
                                    label: "ATOUTAGE"
                                    comment: "SKIP ELEMENT"
                                    nodes:
                                    - !<SetValue>
                                      to: "/SKIP_ELEMENT"
                                      value: "true"
                                    pipelineChanges:
                                      added: !<document>
                                        fields:
                                        - name: "packageName"
                                          type: !<string> {}
                                        - name: "DATA_NAME"
                                          type: !<string> {}
                                        - name: "propertyName"
                                          type: !<string> {}
                                        - name: "ATTRIBUTE_LIST"
                                          type: !<document> {}
                                        - name: "DATA_VALUE"
                                          type: !<string> {}
                                        - name: "DATA_MIN"
                                          type: !<string> {}
                                        - name: "DATA_MAX"
                                          type: !<string> {}
                                        - name: "MIN_VALUE"
                                          type: !<string> {}
                                        - name: "AXAContextHeader"
                                          type: !<docref>
                                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                        - name: "SERVICES_RETENUS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "RESTRICTIONS_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                                          type: !<string> {}
                                        - name: "GARANTIES_RETENUES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                        - name: "idContrat"
                                          type: !<string>
                                            xmlType: "string"
                                        - name: "coverage_attributes_element_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "type_garantie"
                                          type: !<string> {}
                                        - name: "COVERAGES_ELEMENTS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "ATTRIBUTE_LIST_CLONE"
                                          type: !<document> {}
                                        - name: "coverage_attributes_elements_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "FORMULE_CONTRAT"
                                          type: !<string> {}
                                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                          type: !<string> {}
                                        - name: "FORMULE_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "coverage_attributes_element"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "PACKS_SOUSCRITS"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "coverage_attributes_elements"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                        - name: "COVERAGES_ELEMENT_CLONE"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "ATTRIBUTE_TYPE"
                                          type: !<string> {}
                                        - name: "TYPE_GARANTIE"
                                          type: !<string> {}
                                        - name: "TAG_EVOLVED"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Boolean"
                                        - name: "COUVERTURES_SOUSCRITES"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                        - name: "order_by"
                                          type: !<string> {}
                                        - name: "order_direction"
                                          type: !<string> {}
                                        - name: "ELEMENT"
                                          type: !<string> {}
                                        - name: "evolved"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Boolean"
                                        - name: "reference"
                                          type: !<string> {}
                                        - name: "reponseContrat"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                        - name: "tns1:getCoverageResponse"
                                          type: !<docref>
                                            optional: true
                                            xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                        - name: "COVERAGE_REJECTED"
                                          type: !<string> {}
                                        - name: "fault"
                                          type: !<document>
                                            optional: true
                                        - name: "transportInfo"
                                          type: !<document>
                                            optional: true
                                        - name: "COMPTEUR"
                                          type: !<string> {}
                                        - name: "numeric_value"
                                          type: !<javatype>
                                            wrapperType: "java.lang.Double"
                                        - name: "COVERAGES_ELEMENT"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                        - name: "coverage_category"
                                          type: !<docref>
                                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                        - name: "propertyValue"
                                          type: !<string>
                                            optional: true
                                        - name: "DATA_NAME_TRIM"
                                          type: !<string> {}
                                        - name: "DESCRIPTION"
                                          type: !<string> {}
                                        - name: "SKIP_ELEMENT"
                                          type: !<string> {}
                                        - name: "UNIT"
                                          type: !<string> {}
                                  - !<INVOKE>
                                    label: "$default"
                                    pipelineChanges: {}
                                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.policies.coverage:morphSeuilDeclenchementAttributes"
                                    input: !<InputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:name"
                                        to: "/DATA_NAME"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:allowableValues/tns:dataValue"
                                        to: "/DATA_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/DATA_MIN"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:minValue"
                                        to: "/MIN_VALUE"
                                      - !<Copy>
                                        from: "/reponseContrat/productCoverageSpecification/tns:AttributeSpecification/tns:maxValue"
                                        to: "/DATA_MAX"
                                    output: !<OutputMap>
                                      nodes:
                                      - !<Copy>
                                        from: "/DESCRIPTION"
                                        to: "/coverage_attributes_element/description"
                                      - !<Copy>
                                        from: "/UNIT"
                                        to: "/coverage_attributes_element/unit"
                                      - !<Copy>
                                        from: "/numeric_value"
                                        to: "/coverage_attributes_element/numeric_value"
                                      - !<SetValue>
                                        to: "/coverage_attributes_element/type"
                                        value: "APPLICATION_THRESHOLD"
                                  comment: "RG263"
                          - !<BRANCH>
                            evaluateLabels: true
                            nodes:
                            - !<SEQUENCE>
                              label: "%SKIP_ELEMENT% != \"true\""
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP>
                                comment: "DROP SKIP ELEMENT"
                                nodes:
                                - !<Drop>
                                  path: "/SKIP_ELEMENT"
                                pipelineChanges: {}
                              - !<SEQUENCE>
                                comment: "USE CASE TAG"
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "USE CASE"
                                  nodes:
                                  - !<Copy>
                                    from: "/DATA_NAME_TRIM"
                                    to: "/coverage_attributes_element/use_case"
                                  pipelineChanges: {}
                              - !<MAP>
                                comment: "REMOVE NULL FIELDS"
                                nodes:
                                - !<Transformer>
                                  serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element/use_case"
                                      to: "/inputValue"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/outputValue"
                                      to: "/coverage_attributes_element/use_case"
                                pipelineChanges: {}
                              - !<MAP>
                                comment: "CLONE ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.utils:deepClone"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element"
                                      to: "/originalObject"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/clonedObject"
                                      to: "/coverage_attributes_element_CLONE"
                                pipelineChanges: {}
                              - !<MAP>
                                comment: "TO LIST ELEMENT"
                                nodes:
                                - !<Transformer>
                                  serviceName: "pub.list:appendToDocumentList"
                                  input: !<InputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/coverage_attributes_element_CLONE"
                                      to: "/fromItem"
                                    - !<Copy>
                                      from: "/coverage_attributes_elements"
                                      to: "/toList"
                                  output: !<OutputMap>
                                    nodes:
                                    - !<Copy>
                                      from: "/toList"
                                      to: "/coverage_attributes_elements"
                                pipelineChanges: {}
                            - !<SEQUENCE>
                              label: "$default"
                              exitOn: "FAILURE"
                              nodes:
                              - !<MAP> {}
                  - !<MAP>
                    comment: "PREPARE CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements"
                      to: "/ATTRIBUTE_LIST/coverage_attributes_elements"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document>
                            fields:
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - !<MAP>
                    comment: "CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/ATTRIBUTE_LIST"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/ATTRIBUTE_LIST_CLONE"
                    pipelineChanges:
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document>
                            fields:
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - !<MAP>
                    comment: "EXTRACT CLONE ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/ATTRIBUTE_LIST_CLONE/coverage_attributes_elements"
                      to: "/coverage_attributes_elements_CLONE"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      structureModified: !<document>
                        fields:
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                  - !<MAP>
                    comment: "ATTACH ATTRIBUTES LIST"
                    nodes:
                    - !<Copy>
                      from: "/coverage_attributes_elements_CLONE"
                      to: "/COVERAGES_ELEMENT/coverage_attributes"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "EVOLVED TAG"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY TAG EVOLVED"
                    nodes:
                    - !<SetValue>
                      to: "/TAG_EVOLVED"
                      value: false
                      performVariableSubstitution: true
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "DATA_MIN"
                          type: !<string> {}
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "DATA_MAX"
                          type: !<string> {}
                        - name: "MIN_VALUE"
                          type: !<string> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "policy_type"
                          type: !<string>
                            picklistChoices:
                            - "AUTO"
                            - "HOME"
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "type_garantie"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "reference"
                          type: !<string> {}
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "tns1:getCoverageResponse"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "coverageAttributesToMask"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                        - name: "numeric_value"
                          type: !<javatype>
                            wrapperType: "java.lang.Double"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "coverage_category"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                  - !<LOOP>
                    inputArray: "/tns1:getCoverageResponse/reponseContrat/productOption"
                    nodes:
                    - !<SEQUENCE>
                      comment: "REGLE 1"
                      exitOn: "FAILURE"
                      nodes:
                      - !<BRANCH>
                        evaluateLabels: true
                        nodes:
                        - !<SEQUENCE>
                          label: "%tns1:getCoverageResponse/reponseContrat/productOption/tns:kindOfElementName%\
                            \ != null && %tns1:getCoverageResponse/reponseContrat/productOption/tns:kindOfElementName%\
                            \ != \"\""
                          exitOn: "FAILURE"
                          nodes:
                          - !<MAP>
                            comment: "APPLY TAG EVOLVED TRUE"
                            nodes:
                            - !<SetValue>
                              to: "/TAG_EVOLVED"
                              value: true
                              performVariableSubstitution: true
                            pipelineChanges:
                              added: !<document>
                                fields:
                                - name: "tns:GetCoverage"
                                  type: !<docref>
                                    ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                                - name: "DATA_NAME"
                                  type: !<string> {}
                                - name: "ATTRIBUTE_LIST"
                                  type: !<document> {}
                                - name: "SERVICES_RETENUS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "DATA_VALUE"
                                  type: !<string> {}
                                - name: "RESTRICTIONS_RETENUES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "NIVEAU_COUVERTURE_CONTRAT"
                                  type: !<string> {}
                                - name: "GARANTIES_RETENUES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                - name: "auth"
                                  type: !<document> {}
                                - name: "timeout"
                                  type: !<string> {}
                                - name: "FORMULE_CONTRAT"
                                  type: !<string> {}
                                - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                  type: !<string> {}
                                - name: "FORMULE_SOUSCRITES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "PACKS_SOUSCRITS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "coverage_attributes_element_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "COVERAGES_ELEMENT"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "COVERAGES_ELEMENTS"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "ATTRIBUTE_LIST_CLONE"
                                  type: !<document> {}
                                - name: "coverage_attributes_elements_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "coverage_attributes_elements"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "TYPE_GARANTIE"
                                  type: !<string> {}
                                - name: "ATTRIBUTE_TYPE"
                                  type: !<string> {}
                                - name: "coverage_attributes_element"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                - name: "COUVERTURES_SOUSCRITES"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                - name: "COVERAGES_ELEMENT_CLONE"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                - name: "packageName"
                                  type: !<string> {}
                                - name: "_url"
                                  type: !<string> {}
                                - name: "propertyKey"
                                  type: !<document> {}
                                - name: "idContrat"
                                  type: !<string>
                                    xmlType: "string"
                                - name: "AXAContextHeader"
                                  type: !<docref>
                                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                - name: "reponseContrat"
                                  type: !<docref>
                                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                - name: "iard.endpoint"
                                  type: !<string> {}
                                - name: "iard.timeout"
                                  type: !<string> {}
                                - name: "COVERAGE_REJECTED"
                                  type: !<string> {}
                                - name: "iard.user"
                                  type: !<string> {}
                                - name: "iard.password"
                                  type: !<string> {}
                                - name: "order_by"
                                  type: !<string> {}
                                - name: "order_direction"
                                  type: !<string> {}
                                - name: "evolved"
                                  type: !<javatype>
                                    wrapperType: "java.lang.Boolean"
                                - name: "property"
                                  type: !<document> {}
                                - name: "fault"
                                  type: !<document>
                                    optional: true
                                - name: "transportInfo"
                                  type: !<document>
                                    optional: true
                                - name: "COMPTEUR"
                                  type: !<string> {}
                                - name: "TAG_EVOLVED"
                                  type: !<javatype>
                                    wrapperType: "java.lang.Boolean"
                                - name: "DATA_NAME_TRIM"
                                  type: !<string> {}
                                - name: "DESCRIPTION"
                                  type: !<string> {}
                                - name: "UNIT"
                                  type: !<string> {}
                          - !<EXIT>
                            signalFailure: false
                            from: "LOOP"
                    - !<SEQUENCE>
                      comment: "REGLE 2"
                      exitOn: "FAILURE"
                      nodes:
                      - !<LOOP>
                        inputArray: "/tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf"
                        nodes:
                        - !<MAP> {}
                        - !<BRANCH>
                          evaluateLabels: true
                          nodes:
                          - !<SEQUENCE>
                            label: "%COVERAGES_ELEMENT/specification_id% == %tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/@ProductSpecificationReference%"
                            exitOn: "FAILURE"
                            nodes:
                            - !<BRANCH>
                              evaluateLabels: true
                              nodes:
                              - !<SEQUENCE>
                                label: "%tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                  \ == 0 || %tns1:getCoverageResponse/reponseContrat/productOption/tns:IsComposedOf/tns:minimumComponentCount%\
                                  \ == \"0\""
                                exitOn: "FAILURE"
                                nodes:
                                - !<MAP>
                                  comment: "APPLY TAG EVOLVED TRUE"
                                  nodes:
                                  - !<SetValue>
                                    to: "/TAG_EVOLVED"
                                    value: true
                                    performVariableSubstitution: true
                                  pipelineChanges:
                                    added: !<document>
                                      fields:
                                      - name: "AXAContextHeader"
                                        type: !<docref>
                                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                                      - name: "DATA_NAME"
                                        type: !<string> {}
                                      - name: "ATTRIBUTE_LIST"
                                        type: !<document> {}
                                      - name: "DATA_MIN"
                                        type: !<string> {}
                                      - name: "DATA_VALUE"
                                        type: !<string> {}
                                      - name: "DATA_MAX"
                                        type: !<string> {}
                                      - name: "MIN_VALUE"
                                        type: !<string> {}
                                      - name: "SERVICES_RETENUS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "RESTRICTIONS_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                                        type: !<string> {}
                                      - name: "GARANTIES_RETENUES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                                      - name: "idContrat"
                                        type: !<string>
                                          xmlType: "string"
                                      - name: "policy_type"
                                        type: !<string>
                                          picklistChoices:
                                          - "AUTO"
                                          - "HOME"
                                      - name: "FORMULE_CONTRAT"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                        type: !<string> {}
                                      - name: "COVERAGES_ELEMENTS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_LIST_CLONE"
                                        type: !<document> {}
                                      - name: "coverage_attributes_elements_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "FORMULE_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "PACKS_SOUSCRITS"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "TYPE_GARANTIE"
                                        type: !<string> {}
                                      - name: "coverage_attributes_element"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "coverage_attributes_elements"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                                      - name: "COUVERTURES_SOUSCRITES"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                                      - name: "COVERAGES_ELEMENT_CLONE"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "ATTRIBUTE_TYPE"
                                        type: !<string> {}
                                      - name: "type_garantie"
                                        type: !<string> {}
                                      - name: "order_by"
                                        type: !<string> {}
                                      - name: "order_direction"
                                        type: !<string> {}
                                      - name: "evolved"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "TAG_EVOLVED"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Boolean"
                                      - name: "reference"
                                        type: !<string> {}
                                      - name: "reponseContrat"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                                      - name: "tns1:getCoverageResponse"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                                      - name: "COVERAGE_REJECTED"
                                        type: !<string> {}
                                      - name: "coverageAttributesToMask"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                                      - name: "numeric_value"
                                        type: !<javatype>
                                          wrapperType: "java.lang.Double"
                                      - name: "COVERAGES_ELEMENT"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                                      - name: "coverage_category"
                                        type: !<docref>
                                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                                      - name: "DATA_NAME_TRIM"
                                        type: !<string> {}
                                      - name: "DESCRIPTION"
                                        type: !<string> {}
                                      - name: "UNIT"
                                        type: !<string> {}
                                - !<EXIT>
                                  signalFailure: false
                                  from: "LOOP"
                - !<SEQUENCE>
                  comment: "CLEAN EMPTY VALUES"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "NEW REPLACE"
                    nodes:
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/specification_name"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/specification_name"
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.string:replaceEmptyValuesToNull"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT/description"
                          to: "/inputValue"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/outputValue"
                          to: "/COVERAGES_ELEMENT/description"
                    pipelineChanges: {}
                - !<SEQUENCE>
                  comment: "ADD ELEMENT TO LIST"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "APPLY EVOLVED TYPE"
                    nodes:
                    - !<Copy>
                      from: "/TAG_EVOLVED"
                      to: "/COVERAGES_ELEMENT/evolved"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "CLONE GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.utils:deepClone"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT"
                          to: "/originalObject"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/clonedObject"
                          to: "/COVERAGES_ELEMENT_CLONE"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "TO LIST GARANTIE"
                    nodes:
                    - !<Transformer>
                      serviceName: "pub.list:appendToDocumentList"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/COVERAGES_ELEMENT_CLONE"
                          to: "/fromItem"
                        - !<Copy>
                          from: "/COVERAGES_ELEMENTS"
                          to: "/toList"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/toList"
                          to: "/COVERAGES_ELEMENTS"
                    pipelineChanges: {}
                  - !<EXIT>
                    signalFailure: false
                    from: "LOOP"
    - !<MAP>
      comment: "CLEAN"
      nodes:
      - !<Drop>
        path: "/reponseContrat"
      - !<Drop>
        path: "/coverageAttributesToMask"
      - !<Drop>
        path: "/FORMULE_SOUSCRITES"
      - !<Drop>
        path: "/COUVERTURES_SOUSCRITES"
      - !<Drop>
        path: "/PACKS_SOUSCRITS"
      pipelineChanges: {}
  - !<SEQUENCE>
    comment: "FILTERING AND ORDERING"
    exitOn: "FAILURE"
    nodes:
    - !<SEQUENCE>
      comment: "RETIRER LES EVOLVED"
      exitOn: "FAILURE"
      nodes:
      - !<MAP>
        comment: "INIT NEW FILTERED LIST"
        nodes:
        - !<Transformer>
          serviceName: "pub.list:appendToDocumentList"
          input: !<InputMap> {}
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/toList"
              to: "/COVERAGES_ELEMENTS_FILTERED"
        pipelineChanges:
          added: !<document>
            fields:
            - name: "AXAContextHeader"
              type: !<docref>
                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
            - name: "DATA_NAME"
              type: !<string> {}
            - name: "DATA_MIN"
              type: !<string> {}
            - name: "DATA_MAX"
              type: !<string> {}
            - name: "DATA_VALUE"
              type: !<string> {}
            - name: "MIN_VALUE"
              type: !<string> {}
            - name: "idContrat"
              type: !<string>
                xmlType: "string"
            - name: "policy_type"
              type: !<string>
                picklistChoices:
                - "AUTO"
                - "HOME"
            - name: "type_garantie"
              type: !<string> {}
            - name: "order_by"
              type: !<string> {}
            - name: "COVERAGES_ELEMENTS"
              type: !<docref>
                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
            - name: "order_direction"
              type: !<string> {}
            - name: "evolved"
              type: !<javatype>
                wrapperType: "java.lang.Boolean"
            - name: "reference"
              type: !<string> {}
            - name: "coverage_attributes_element"
              type: !<docref>
                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
            - name: "SKIP_ELEMENT"
              type: !<string> {}
            - name: "numeric_value"
              type: !<javatype>
                wrapperType: "java.lang.Double"
            - name: "COVERAGES_ELEMENTS_FILTERED"
              type: !<docref>
                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
      - !<BRANCH>
        evaluateLabels: true
        nodes:
        - !<SEQUENCE>
          label: "%evolved% != null && %evolved% != \"\" "
          exitOn: "FAILURE"
          nodes:
          - !<LOOP>
            inputArray: "/COVERAGES_ELEMENTS"
            nodes:
            - !<BRANCH>
              evaluateLabels: true
              nodes:
              - !<SEQUENCE>
                label: "%evolved% == %COVERAGES_ELEMENTS/evolved%"
                exitOn: "FAILURE"
                nodes:
                - !<MAP>
                  comment: "COPY TO FILTERED LIST"
                  nodes:
                  - !<Transformer>
                    serviceName: "pub.list:appendToDocumentList"
                    input: !<InputMap>
                      nodes:
                      - !<Copy>
                        from: "/COVERAGES_ELEMENTS"
                        to: "/fromItem"
                      - !<Copy>
                        from: "/COVERAGES_ELEMENTS_FILTERED"
                        to: "/fromList"
                    output: !<OutputMap>
                      nodes:
                      - !<Copy>
                        from: "/toList"
                        to: "/COVERAGES_ELEMENTS_FILTERED"
                  pipelineChanges: {}
          - !<MAP>
            comment: "REMAP TO OUTPUT LIST"
            nodes:
            - !<Copy>
              from: "/COVERAGES_ELEMENTS_FILTERED"
              to: "/COVERAGES_ELEMENTS"
            - !<Drop>
              path: "/COVERAGES_ELEMENTS_FILTERED"
            pipelineChanges: {}
    - !<BRANCH>
      switchProperty: "/reference"
      nodes:
      - !<SEQUENCE>
        label: "/.+/"
        exitOn: "FAILURE"
        nodes:
        - !<MAP>
          comment: "filter reference to specification_id"
          nodes:
          - !<Transformer>
            serviceName: "AFS_common_apiweb_v1.pub.document:filterByDocuments"
            input: !<InputMap>
              nodes:
              - !<SetValue>
                to: "/filterBy"
                value: "specification_id"
              - !<Copy>
                from: "/reference"
                to: "/value"
              - !<Copy>
                from: "/COVERAGES_ELEMENTS"
                to: "/documents"
            output: !<OutputMap>
              nodes:
              - !<Copy>
                from: "/docsFiltered"
                to: "/COVERAGES_ELEMENTS"
          pipelineChanges: {}
      comment: "FILTER"
    - !<BRANCH>
      switchProperty: "/type_garantie"
      nodes:
      - !<SEQUENCE>
        label: "/.+/"
        exitOn: "FAILURE"
        nodes:
        - !<MAP>
          comment: "filter on type_garantie"
          nodes:
          - !<Transformer>
            serviceName: "AFS_common_apiweb_v1.pub.document:filterByDocuments"
            input: !<InputMap>
              nodes:
              - !<Copy>
                from: "/COVERAGES_ELEMENTS"
                to: "/documents"
              - !<Copy>
                from: "/type_garantie"
                to: "/value"
              - !<SetValue>
                to: "/filterBy"
                value: "coverage_type"
            output: !<OutputMap>
              nodes:
              - !<Copy>
                from: "/docsFiltered"
                to: "/COVERAGES_ELEMENTS"
          pipelineChanges: {}
      comment: "FILTER"
    - !<SEQUENCE>
      disable: true
      comment: "ORDER TO ENHANCE SO NULL VALUES  ARE AT THE END"
      exitOn: "FAILURE"
      nodes:
      - !<BRANCH>
        switchProperty: "/order_by"
        nodes:
        - !<SEQUENCE>
          disable: true
          label: "/.+/"
          exitOn: "FAILURE"
        - !<SEQUENCE>
          disable: true
          label: "$default"
          comment: "default ordering by marketing order"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_by"
              value: "marketing_order"
            - !<SetValue>
              disable: true
              to: "/order_direction"
              value: "ASC"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
        comment: "INIT ORDER BY"
        disable: true
      - !<MAP>
        disable: true
        comment: "TO UPPER"
        nodes:
        - !<Transformer>
          disable: true
          serviceName: "pub.string:toUpper"
          input: !<InputMap>
            nodes:
            - !<Copy>
              from: "/order_by"
              to: "/inString"
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/value"
              to: "/order_by"
        - !<Transformer>
          disable: true
          serviceName: "pub.string:toUpper"
          input: !<InputMap>
            nodes:
            - !<Copy>
              from: "/order_direction"
              to: "/inString"
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/value"
              to: "/order_direction"
        pipelineChanges: {}
      - !<BRANCH>
        switchProperty: "/order_direction"
        nodes:
        - !<SEQUENCE>
          disable: true
          label: "DESC"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_direction"
              value: "descending"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
        - !<SEQUENCE>
          disable: true
          label: "ASC"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_direction"
              value: "ascending"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
        disable: true
      - !<BRANCH>
        switchProperty: "/order_by"
        nodes:
        - !<SEQUENCE>
          disable: true
          label: "TYPE"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_by"
              value: "coverage_type"
            - !<SetValue>
              disable: true
              to: "/ranking"
              value: "string"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "ranking"
                  type: !<string> {}
        - !<SEQUENCE>
          disable: true
          label: "MARKETING_ORDER"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_by"
              value: "marketing_order"
            - !<SetValue>
              disable: true
              to: "/ranking"
              value: "numeric"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "ranking"
                  type: !<string> {}
        - !<SEQUENCE>
          disable: true
          label: "CATEGORY"
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            disable: true
            nodes:
            - !<SetValue>
              disable: true
              to: "/order_by"
              value: "coverage_category/id"
            - !<SetValue>
              disable: true
              to: "/ranking"
              value: "string"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "policy_type"
                  type: !<string>
                    picklistChoices:
                    - "AUTO"
                    - "HOME"
                - name: "type_garantie"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reference"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "ranking"
                  type: !<string> {}
        disable: true
      - !<MAP>
        disable: true
        nodes:
        - !<Transformer>
          disable: true
          serviceName: "AFS_common_apiweb_v1.pub.document:sortDocuments"
          input: !<InputMap>
            nodes:
            - !<Copy>
              from: "/COVERAGES_ELEMENTS"
              to: "/documents"
            - !<Copy>
              from: "/order_direction"
              to: "/sortCriteria/order"
            - !<Copy>
              from: "/order_by"
              to: "/sortCriteria/key"
            - !<Copy>
              from: "/ranking"
              to: "/sortCriteria/compareStringsAs"
          output: !<OutputMap>
            nodes:
            - !<Copy>
              from: "/documents"
              to: "/COVERAGES_ELEMENTS"
        - !<Drop>
          disable: true
          path: "/ranking"
        pipelineChanges: {}
    - !<SEQUENCE>
      comment: "4. ORDERING"
      exitOn: "FAILURE"
      nodes:
      - !<BRANCH>
        evaluateLabels: true
        nodes:
        - !<SEQUENCE>
          label: "%order_by% != null && %order_by% != \"\""
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            comment: "TO UPPER PARAMS"
            nodes:
            - !<Transformer>
              serviceName: "pub.string:toUpper"
              input: !<InputMap>
                nodes:
                - !<Copy>
                  from: "/order_by"
                  to: "/inString"
              output: !<OutputMap>
                nodes:
                - !<Copy>
                  from: "/value"
                  to: "/order_by"
            - !<Transformer>
              serviceName: "pub.string:toUpper"
              input: !<InputMap>
                nodes:
                - !<Copy>
                  from: "/order_direction"
                  to: "/inString"
              output: !<OutputMap>
                nodes:
                - !<Copy>
                  from: "/value"
                  to: "/order_direction"
            pipelineChanges: {}
          - !<BRANCH>
            switchProperty: "/order_by"
            nodes:
            - !<SEQUENCE>
              label: "TYPE"
              exitOn: "FAILURE"
              nodes:
              - !<MAP>
                comment: "Order by"
                nodes:
                - !<SetValue>
                  to: "/order_by"
                  value: "coverage_type"
                pipelineChanges:
                  added: !<document>
                    fields:
                    - name: "AXAContextHeader"
                      type: !<docref>
                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                    - name: "DATA_NAME"
                      type: !<string> {}
                    - name: "ATTRIBUTE_LIST"
                      type: !<document> {}
                    - name: "DATA_MIN"
                      type: !<string> {}
                    - name: "DATA_VALUE"
                      type: !<string> {}
                    - name: "DATA_MAX"
                      type: !<string> {}
                    - name: "MIN_VALUE"
                      type: !<string> {}
                    - name: "SERVICES_RETENUS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "RESTRICTIONS_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                      type: !<string> {}
                    - name: "GARANTIES_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                    - name: "idContrat"
                      type: !<string>
                        xmlType: "string"
                    - name: "policy_type"
                      type: !<string> {}
                    - name: "FORMULE_CONTRAT"
                      type: !<string> {}
                    - name: "coverage_attributes_element_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_LIST_CLONE"
                      type: !<document> {}
                    - name: "coverage_attributes_elements_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "FORMULE_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "PACKS_SOUSCRITS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "TYPE_GARANTIE"
                      type: !<string> {}
                    - name: "coverage_attributes_element"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "coverage_attributes_elements"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TAG_EVOLVED"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "COVERAGES_ELEMENT_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_TYPE"
                      type: !<string> {}
                    - name: "COUVERTURES_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "type_garantie"
                      type: !<string> {}
                    - name: "order_by"
                      type: !<string> {}
                    - name: "order_direction"
                      type: !<string> {}
                    - name: "evolved"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "reponseContrat"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                    - name: "tns1:getCoverageResponse"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                    - name: "reference"
                      type: !<string> {}
                    - name: "COVERAGE_REJECTED"
                      type: !<string> {}
                    - name: "coverageAttributesToMask"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                    - name: "numeric_value"
                      type: !<javatype>
                        wrapperType: "java.lang.Double"
                    - name: "coverage_category"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                    - name: "COVERAGES_ELEMENT"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "DATA_NAME_TRIM"
                      type: !<string> {}
                    - name: "DESCRIPTION"
                      type: !<string> {}
                    - name: "UNIT"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS_FILTERED"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
              - !<MAP>
                comment: "string ranking"
                nodes:
                - !<SetValue>
                  to: "/ranking"
                  value: "string"
                pipelineChanges:
                  added: !<document>
                    fields:
                    - name: "tns1:getCoverage"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                    - name: "DATA_NAME"
                      type: !<string> {}
                    - name: "ATTRIBUTE_LIST"
                      type: !<document> {}
                    - name: "SERVICES_RETENUS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "DATA_VALUE"
                      type: !<string> {}
                    - name: "RESTRICTIONS_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                      type: !<string> {}
                    - name: "GARANTIES_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                    - name: "auth"
                      type: !<document> {}
                    - name: "timeout"
                      type: !<string> {}
                    - name: "FORMULE_CONTRAT"
                      type: !<string> {}
                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                      type: !<string> {}
                    - name: "FORMULE_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "PACKS_SOUSCRITS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "coverage_attributes_element_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "COVERAGES_ELEMENT"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "COVERAGES_ELEMENTS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_LIST_CLONE"
                      type: !<document> {}
                    - name: "coverage_attributes_elements_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "coverage_attributes_elements"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TYPE_GARANTIE"
                      type: !<string> {}
                    - name: "ATTRIBUTE_TYPE"
                      type: !<string> {}
                    - name: "coverage_attributes_element"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TAG_EVOLVED"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "COUVERTURES_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "COVERAGES_ELEMENT_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "packageName"
                      type: !<string> {}
                    - name: "_url"
                      type: !<string> {}
                    - name: "propertyKey"
                      type: !<document> {}
                    - name: "idContrat"
                      type: !<string>
                        xmlType: "string"
                    - name: "AXAContextHeader"
                      type: !<docref>
                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                    - name: "iard.endpoint"
                      type: !<string> {}
                    - name: "iard.timeout"
                      type: !<string> {}
                    - name: "iard.user"
                      type: !<string> {}
                    - name: "COVERAGE_REJECTED"
                      type: !<string> {}
                    - name: "iard.password"
                      type: !<string> {}
                    - name: "order_by"
                      type: !<string> {}
                    - name: "order_direction"
                      type: !<string> {}
                    - name: "evolved"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "reponseContrat"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                    - name: "reference"
                      type: !<string> {}
                    - name: "property"
                      type: !<document> {}
                    - name: "tns1:getCoverageResponse"
                      type: !<docref>
                        optional: true
                        xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                    - name: "fault"
                      type: !<document>
                        optional: true
                    - name: "transportInfo"
                      type: !<document>
                        optional: true
                    - name: "COMPTEUR"
                      type: !<string> {}
                    - name: "DATA_NAME_TRIM"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS_FILTERED"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "DESCRIPTION"
                      type: !<string> {}
                    - name: "UNIT"
                      type: !<string> {}
                    - name: "ranking"
                      type: !<string> {}
              - !<BRANCH>
                switchProperty: "/order_direction"
                nodes:
                - !<SEQUENCE>
                  label: "ASC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "ascending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - !<SEQUENCE>
                  label: "DESC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "descending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR ZZZZ"
                exitOn: "FAILURE"
                nodes:
                - !<MAP>
                  comment: "RESET TAG APPLIQUE"
                  nodes:
                  - !<SetValue>
                    to: "/TAG_APPLIQUE"
                    value: "false"
                  pipelineChanges:
                    added: !<document>
                      fields:
                      - name: "AXAContextHeader"
                        type: !<docref>
                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                      - name: "idContrat"
                        type: !<string>
                          xmlType: "string"
                      - name: "type"
                        type: !<string> {}
                      - name: "order_by"
                        type: !<string> {}
                      - name: "order_direction"
                        type: !<string> {}
                      - name: "evolved"
                        type: !<javatype>
                          wrapperType: "java.lang.Boolean"
                      - name: "reference"
                        type: !<string> {}
                      - name: "ranking"
                        type: !<string> {}
                      - name: "COVERAGES_ELEMENTS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "TAG_APPLIQUE"
                        type: !<string> {}
                - !<LOOP>
                  inputArray: "/COVERAGES_ELEMENTS"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/COVERAGES_ELEMENTS/coverage_type"
                    nodes:
                    - !<SEQUENCE>
                      label: "$null"
                      exitOn: "FAILURE"
                      nodes:
                      - !<MAP>
                        comment: "FLAG"
                        nodes:
                        - !<SetValue>
                          to: "/TAG_APPLIQUE"
                          value: "true"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "tns1:getCoverage"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                            - name: "DATA_NAME"
                              type: !<string> {}
                            - name: "ATTRIBUTE_LIST"
                              type: !<document> {}
                            - name: "DATA_MIN"
                              type: !<string> {}
                            - name: "DATA_VALUE"
                              type: !<string> {}
                            - name: "DATA_MAX"
                              type: !<string> {}
                            - name: "MIN_VALUE"
                              type: !<string> {}
                            - name: "SERVICES_RETENUS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "RESTRICTIONS_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TAG_APPLIQUE"
                              type: !<string> {}
                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                              type: !<string> {}
                            - name: "GARANTIES_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                            - name: "auth"
                              type: !<document> {}
                            - name: "timeout"
                              type: !<string> {}
                            - name: "FORMULE_CONTRAT"
                              type: !<string> {}
                            - name: "coverage_attributes_element_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENTS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_LIST_CLONE"
                              type: !<document> {}
                            - name: "coverage_attributes_elements_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "FORMULE_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "PACKS_SOUSCRITS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TYPE_GARANTIE"
                              type: !<string> {}
                            - name: "coverage_attributes_element"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "TAG_EVOLVED"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "COVERAGES_ELEMENT_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_TYPE"
                              type: !<string> {}
                            - name: "COUVERTURES_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "packageName"
                              type: !<string> {}
                            - name: "_url"
                              type: !<string> {}
                            - name: "propertyKey"
                              type: !<document> {}
                            - name: "AXAContextHeader"
                              type: !<docref>
                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                            - name: "idContrat"
                              type: !<string>
                                xmlType: "string"
                            - name: "iard.endpoint"
                              type: !<string> {}
                            - name: "iard.timeout"
                              type: !<string> {}
                            - name: "iard.user"
                              type: !<string> {}
                            - name: "COVERAGE_REJECTED"
                              type: !<string> {}
                            - name: "iard.password"
                              type: !<string> {}
                            - name: "order_by"
                              type: !<string> {}
                            - name: "order_direction"
                              type: !<string> {}
                            - name: "reponseContrat"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                            - name: "evolved"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "reference"
                              type: !<string> {}
                            - name: "property"
                              type: !<document> {}
                            - name: "tns1:getCoverageResponse"
                              type: !<docref>
                                optional: true
                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                            - name: "fault"
                              type: !<document>
                                optional: true
                            - name: "transportInfo"
                              type: !<document>
                                optional: true
                            - name: "COVERAGES_ELEMENTS_FILTERED"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "COMPTEUR"
                              type: !<string> {}
                            - name: "numeric_value"
                              type: !<javatype>
                                wrapperType: "java.lang.Double"
                            - name: "ranking"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENT"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "coverage_category"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                            - name: "DATA_NAME_TRIM"
                              type: !<string> {}
                            - name: "DESCRIPTION"
                              type: !<string> {}
                            - name: "UNIT"
                              type: !<string> {}
                            - name: "propertyValue"
                              type: !<string> {}
                      - !<MAP>
                        comment: "APPLY TAG ZZZZ"
                        nodes:
                        - !<SetValue>
                          to: "/COVERAGES_ELEMENTS/coverage_type"
                          value: "ZZZZ"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "tns1:getCoverage"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                            - name: "DATA_NAME"
                              type: !<string> {}
                            - name: "propertyName"
                              type: !<string> {}
                            - name: "ATTRIBUTE_LIST"
                              type: !<document> {}
                            - name: "DATA_VALUE"
                              type: !<string> {}
                            - name: "DATA_MIN"
                              type: !<string> {}
                            - name: "DATA_MAX"
                              type: !<string> {}
                            - name: "MIN_VALUE"
                              type: !<string> {}
                            - name: "SERVICES_RETENUS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TAG_APPLIQUE"
                              type: !<string> {}
                            - name: "RESTRICTIONS_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                              type: !<string> {}
                            - name: "GARANTIES_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                            - name: "auth"
                              type: !<document> {}
                            - name: "timeout"
                              type: !<string> {}
                            - name: "coverage_attributes_element_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "FORMULE_CONTRAT"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENTS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_LIST_CLONE"
                              type: !<document> {}
                            - name: "coverage_attributes_elements_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                              type: !<string> {}
                            - name: "FORMULE_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "PACKS_SOUSCRITS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "coverage_attributes_element"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "TYPE_GARANTIE"
                              type: !<string> {}
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "COVERAGES_ELEMENT_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_TYPE"
                              type: !<string> {}
                            - name: "SKIP_ELEMENT"
                              type: !<string> {}
                            - name: "TAG_EVOLVED"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "COUVERTURES_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "packageName"
                              type: !<string> {}
                            - name: "_url"
                              type: !<string> {}
                            - name: "ELEMENT"
                              type: !<string> {}
                            - name: "propertyKey"
                              type: !<document> {}
                            - name: "AXAContextHeader"
                              type: !<docref>
                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                            - name: "idContrat"
                              type: !<string>
                                xmlType: "string"
                            - name: "iard.endpoint"
                              type: !<string> {}
                            - name: "iard.timeout"
                              type: !<string> {}
                            - name: "COVERAGE_REJECTED"
                              type: !<string> {}
                            - name: "iard.user"
                              type: !<string> {}
                            - name: "iard.password"
                              type: !<string> {}
                            - name: "type_garantie"
                              type: !<string> {}
                            - name: "order_by"
                              type: !<string> {}
                            - name: "order_direction"
                              type: !<string> {}
                            - name: "reponseContrat"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                            - name: "evolved"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "reference"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENTS_FILTERED"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "property"
                              type: !<document> {}
                            - name: "tns1:getCoverageResponse"
                              type: !<docref>
                                optional: true
                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                            - name: "ranking"
                              type: !<string> {}
                            - name: "fault"
                              type: !<document>
                                optional: true
                            - name: "transportInfo"
                              type: !<document>
                                optional: true
                            - name: "COMPTEUR"
                              type: !<string> {}
                            - name: "numeric_value"
                              type: !<javatype>
                                wrapperType: "java.lang.Double"
                            - name: "COVERAGES_ELEMENT"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "coverage_category"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                            - name: "propertyValue"
                              type: !<string>
                                optional: true
                            - name: "DATA_NAME_TRIM"
                              type: !<string> {}
                            - name: "DESCRIPTION"
                              type: !<string> {}
                            - name: "UNIT"
                              type: !<string> {}
              - !<MAP>
                comment: "APPLY FILTER"
                nodes:
                - !<Transformer>
                  serviceName: "AFS_common_apiweb_v1.pub.document:sortDocuments"
                  input: !<InputMap>
                    nodes:
                    - !<Copy>
                      from: "/COVERAGES_ELEMENTS"
                      to: "/documents"
                    - !<Copy>
                      from: "/order_by"
                      to: "/sortCriteria/key"
                    - !<Copy>
                      from: "/order_direction"
                      to: "/sortCriteria/order"
                    - !<Copy>
                      from: "/ranking"
                      to: "/sortCriteria/compareStringsAs"
                  output: !<OutputMap>
                    nodes:
                    - !<Copy>
                      from: "/documents"
                      to: "/COVERAGES_ELEMENTS"
                pipelineChanges: {}
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR VIDE"
                exitOn: "FAILURE"
                nodes:
                - !<BRANCH>
                  switchProperty: "/TAG_APPLIQUE"
                  nodes:
                  - !<LOOP>
                    label: "true"
                    inputArray: "/COVERAGES_ELEMENTS"
                    nodes:
                    - !<MAP> {}
                    - !<BRANCH>
                      switchProperty: "/COVERAGES_ELEMENTS/coverage_type"
                      nodes:
                      - !<SEQUENCE>
                        label: "/ZZZZ/"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "RESET TAG MAX"
                          nodes:
                          - !<Transformer>
                            serviceName: "AFS_common_apiweb_v1.pub.number:returnNull"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/value_return"
                                to: "/COVERAGES_ELEMENTS/coverage_type"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "DATA_NAME"
                                type: !<string> {}
                              - name: "ATTRIBUTE_LIST"
                                type: !<document> {}
                              - name: "DATA_MIN"
                                type: !<string> {}
                              - name: "DATA_VALUE"
                                type: !<string> {}
                              - name: "DATA_MAX"
                                type: !<string> {}
                              - name: "MIN_VALUE"
                                type: !<string> {}
                              - name: "SERVICES_RETENUS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "RESTRICTIONS_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TAG_APPLIQUE"
                                type: !<string> {}
                              - name: "NIVEAU_COUVERTURE_CONTRAT"
                                type: !<string> {}
                              - name: "GARANTIES_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "policy_type"
                                type: !<string> {}
                              - name: "FORMULE_CONTRAT"
                                type: !<string> {}
                              - name: "coverage_attributes_element_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_LIST_CLONE"
                                type: !<document> {}
                              - name: "coverage_attributes_elements_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "coverage_attributes_element"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "TAG_EVOLVED"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "COVERAGES_ELEMENT_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "type_garantie"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "tns1:getCoverageResponse"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                              - name: "reference"
                                type: !<string> {}
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "coverageAttributesToMask"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                              - name: "numeric_value"
                                type: !<javatype>
                                  wrapperType: "java.lang.Double"
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "DATA_NAME_TRIM"
                                type: !<string> {}
                              - name: "DESCRIPTION"
                                type: !<string> {}
                              - name: "UNIT"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENTS_FILTERED"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ranking"
                                type: !<string> {}
                        - !<MAP>
                          comment: "DEBUG"
            - !<SEQUENCE>
              label: "MARKETING_ORDER"
              exitOn: "FAILURE"
              nodes:
              - !<MAP>
                comment: "Order by"
                nodes:
                - !<SetValue>
                  to: "/order_by"
                  value: "marketing_order"
                pipelineChanges:
                  added: !<document>
                    fields:
                    - name: "tns:GetCoverage"
                      type: !<docref>
                        ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                    - name: "DATA_NAME"
                      type: !<string> {}
                    - name: "ATTRIBUTE_LIST"
                      type: !<document> {}
                    - name: "SERVICES_RETENUS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "DATA_VALUE"
                      type: !<string> {}
                    - name: "RESTRICTIONS_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                      type: !<string> {}
                    - name: "GARANTIES_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                    - name: "auth"
                      type: !<document> {}
                    - name: "timeout"
                      type: !<string> {}
                    - name: "FORMULE_CONTRAT"
                      type: !<string> {}
                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                      type: !<string> {}
                    - name: "FORMULE_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "PACKS_SOUSCRITS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "coverage_attributes_element_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "COVERAGES_ELEMENT"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "COVERAGES_ELEMENTS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_LIST_CLONE"
                      type: !<document> {}
                    - name: "coverage_attributes_elements_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "coverage_attributes_elements"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TYPE_GARANTIE"
                      type: !<string> {}
                    - name: "ATTRIBUTE_TYPE"
                      type: !<string> {}
                    - name: "coverage_attributes_element"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TAG_EVOLVED"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "COUVERTURES_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "COVERAGES_ELEMENT_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "packageName"
                      type: !<string> {}
                    - name: "_url"
                      type: !<string> {}
                    - name: "propertyKey"
                      type: !<document> {}
                    - name: "idContrat"
                      type: !<string>
                        xmlType: "string"
                    - name: "AXAContextHeader"
                      type: !<docref>
                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                    - name: "reponseContrat"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                    - name: "iard.endpoint"
                      type: !<string> {}
                    - name: "iard.timeout"
                      type: !<string> {}
                    - name: "COVERAGE_REJECTED"
                      type: !<string> {}
                    - name: "iard.user"
                      type: !<string> {}
                    - name: "iard.password"
                      type: !<string> {}
                    - name: "order_by"
                      type: !<string> {}
                    - name: "order_direction"
                      type: !<string> {}
                    - name: "evolved"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "property"
                      type: !<document> {}
                    - name: "fault"
                      type: !<document>
                        optional: true
                    - name: "transportInfo"
                      type: !<document>
                        optional: true
                    - name: "COMPTEUR"
                      type: !<string> {}
                    - name: "DATA_NAME_TRIM"
                      type: !<string> {}
                    - name: "DESCRIPTION"
                      type: !<string> {}
                    - name: "UNIT"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS_FILTERED"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
              - !<MAP>
                comment: "numeric ranking"
                nodes:
                - !<SetValue>
                  to: "/ranking"
                  value: "numeric"
                pipelineChanges:
                  added: !<document>
                    fields:
                    - name: "tns1:getCoverage"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                    - name: "DATA_NAME"
                      type: !<string> {}
                    - name: "ATTRIBUTE_LIST"
                      type: !<document> {}
                    - name: "SERVICES_RETENUS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "DATA_VALUE"
                      type: !<string> {}
                    - name: "RESTRICTIONS_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                      type: !<string> {}
                    - name: "GARANTIES_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                    - name: "auth"
                      type: !<document> {}
                    - name: "timeout"
                      type: !<string> {}
                    - name: "FORMULE_CONTRAT"
                      type: !<string> {}
                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                      type: !<string> {}
                    - name: "FORMULE_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "PACKS_SOUSCRITS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "coverage_attributes_element_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "COVERAGES_ELEMENT"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "COVERAGES_ELEMENTS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_LIST_CLONE"
                      type: !<document> {}
                    - name: "coverage_attributes_elements_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "coverage_attributes_elements"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TYPE_GARANTIE"
                      type: !<string> {}
                    - name: "ATTRIBUTE_TYPE"
                      type: !<string> {}
                    - name: "coverage_attributes_element"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TAG_EVOLVED"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "COUVERTURES_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "COVERAGES_ELEMENT_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "packageName"
                      type: !<string> {}
                    - name: "_url"
                      type: !<string> {}
                    - name: "propertyKey"
                      type: !<document> {}
                    - name: "idContrat"
                      type: !<string>
                        xmlType: "string"
                    - name: "AXAContextHeader"
                      type: !<docref>
                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                    - name: "iard.endpoint"
                      type: !<string> {}
                    - name: "iard.timeout"
                      type: !<string> {}
                    - name: "iard.user"
                      type: !<string> {}
                    - name: "COVERAGE_REJECTED"
                      type: !<string> {}
                    - name: "iard.password"
                      type: !<string> {}
                    - name: "order_by"
                      type: !<string> {}
                    - name: "order_direction"
                      type: !<string> {}
                    - name: "evolved"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "reponseContrat"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                    - name: "reference"
                      type: !<string> {}
                    - name: "ranking"
                      type: !<string> {}
                    - name: "property"
                      type: !<document> {}
                    - name: "tns1:getCoverageResponse"
                      type: !<docref>
                        optional: true
                        xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                    - name: "fault"
                      type: !<document>
                        optional: true
                    - name: "transportInfo"
                      type: !<document>
                        optional: true
                    - name: "COMPTEUR"
                      type: !<string> {}
                    - name: "DATA_NAME_TRIM"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS_FILTERED"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "DESCRIPTION"
                      type: !<string> {}
                    - name: "UNIT"
                      type: !<string> {}
              - !<BRANCH>
                switchProperty: "/order_direction"
                nodes:
                - !<SEQUENCE>
                  label: "ASC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "ascending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - !<SEQUENCE>
                  label: "DESC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "descending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR LA MAX VALUE"
                exitOn: "FAILURE"
                nodes:
                - !<MAP>
                  comment: "DROP PROPERTY"
                  nodes:
                  - !<Drop>
                    path: "/propertyValue"
                - !<MAP>
                  comment: "RESET TAG APPLIQUE"
                  nodes:
                  - !<SetValue>
                    to: "/TAG_APPLIQUE"
                    value: "false"
                  pipelineChanges:
                    added: !<document>
                      fields:
                      - name: "AXAContextHeader"
                        type: !<docref>
                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                      - name: "idContrat"
                        type: !<string>
                          xmlType: "string"
                      - name: "type"
                        type: !<string> {}
                      - name: "order_by"
                        type: !<string> {}
                      - name: "order_direction"
                        type: !<string> {}
                      - name: "evolved"
                        type: !<javatype>
                          wrapperType: "java.lang.Boolean"
                      - name: "reference"
                        type: !<string> {}
                      - name: "ranking"
                        type: !<string> {}
                      - name: "COVERAGES_ELEMENTS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "TAG_APPLIQUE"
                        type: !<string> {}
                - !<MAP>
                  comment: "getDefaultMaxRank"
                  nodes:
                  - !<Transformer>
                    serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.properties:getDefaultMaxRank"
                    input: !<InputMap> {}
                    output: !<OutputMap>
                      nodes:
                      - !<Copy>
                        from: "/rank"
                        to: "/propertyValue"
                  pipelineChanges:
                    added: !<document>
                      fields:
                      - name: "AXAContextHeader"
                        type: !<docref>
                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                      - name: "DATA_NAME"
                        type: !<string> {}
                      - name: "ATTRIBUTE_LIST"
                        type: !<document> {}
                      - name: "DATA_MIN"
                        type: !<string> {}
                      - name: "DATA_VALUE"
                        type: !<string> {}
                      - name: "DATA_MAX"
                        type: !<string> {}
                      - name: "MIN_VALUE"
                        type: !<string> {}
                      - name: "SERVICES_RETENUS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                      - name: "RESTRICTIONS_RETENUES"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                      - name: "TAG_APPLIQUE"
                        type: !<string> {}
                      - name: "NIVEAU_COUVERTURE_CONTRAT"
                        type: !<string> {}
                      - name: "GARANTIES_RETENUES"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                      - name: "idContrat"
                        type: !<string>
                          xmlType: "string"
                      - name: "type_garantie"
                        type: !<string> {}
                      - name: "FORMULE_CONTRAT"
                        type: !<string> {}
                      - name: "coverage_attributes_element_CLONE"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      - name: "LIBELLE_COMMERCIAL_CONTRAT"
                        type: !<string> {}
                      - name: "COVERAGES_ELEMENTS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "ATTRIBUTE_LIST_CLONE"
                        type: !<document> {}
                      - name: "coverage_attributes_elements_CLONE"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      - name: "FORMULE_SOUSCRITES"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                      - name: "PACKS_SOUSCRITS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                      - name: "TYPE_GARANTIE"
                        type: !<string> {}
                      - name: "coverage_attributes_element"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      - name: "coverage_attributes_elements"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                      - name: "TAG_EVOLVED"
                        type: !<javatype>
                          wrapperType: "java.lang.Boolean"
                      - name: "COVERAGES_ELEMENT_CLONE"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "ATTRIBUTE_TYPE"
                        type: !<string> {}
                      - name: "COUVERTURES_SOUSCRITES"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                      - name: "order_by"
                        type: !<string> {}
                      - name: "order_direction"
                        type: !<string> {}
                      - name: "evolved"
                        type: !<javatype>
                          wrapperType: "java.lang.Boolean"
                      - name: "reference"
                        type: !<string> {}
                      - name: "reponseContrat"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                      - name: "tns1:getCoverageResponse"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                      - name: "COVERAGE_REJECTED"
                        type: !<string> {}
                      - name: "coverageAttributesToMask"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Configuration_v1.doc.pub.referential.Coverage:CoverageAttributeToMask"
                      - name: "numeric_value"
                        type: !<javatype>
                          wrapperType: "java.lang.Double"
                      - name: "COVERAGES_ELEMENT"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "coverage_category"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                      - name: "DATA_NAME_TRIM"
                        type: !<string> {}
                      - name: "DESCRIPTION"
                        type: !<string> {}
                      - name: "UNIT"
                        type: !<string> {}
                      - name: "COVERAGES_ELEMENTS_FILTERED"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "ranking"
                        type: !<string> {}
                      - name: "propertyValue"
                        type: !<string> {}
                - !<LOOP>
                  inputArray: "/COVERAGES_ELEMENTS"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/COVERAGES_ELEMENTS/marketing_order"
                    nodes:
                    - !<SEQUENCE>
                      label: "$null"
                      exitOn: "FAILURE"
                      nodes:
                      - !<MAP>
                        comment: "FLAG"
                        nodes:
                        - !<SetValue>
                          to: "/TAG_APPLIQUE"
                          value: "true"
                        - !<Transformer>
                          serviceName: "AFS_common_apiweb_v1.pub.number:StringToInteger"
                          input: !<InputMap>
                            nodes:
                            - !<Copy>
                              from: "/propertyValue"
                              to: "/input"
                          output: !<OutputMap>
                            nodes:
                            - !<Copy>
                              from: "/number_integer"
                              to: "/RANKING_TAG_APPLIQUE"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "RANKING_TAG_APPLIQUE"
                              type: !<javatype>
                                wrapperType: "java.lang.Integer"
                      - !<MAP>
                        comment: "APPLY TAG MAX"
                        nodes:
                        - !<Copy>
                          from: "/RANKING_TAG_APPLIQUE"
                          to: "/COVERAGES_ELEMENTS/marketing_order"
                        pipelineChanges: {}
              - !<MAP>
                comment: "APPLY FILTER"
                nodes:
                - !<Transformer>
                  serviceName: "AFS_common_apiweb_v1.pub.document:sortDocuments"
                  input: !<InputMap>
                    nodes:
                    - !<Copy>
                      from: "/COVERAGES_ELEMENTS"
                      to: "/documents"
                    - !<Copy>
                      from: "/order_by"
                      to: "/sortCriteria/key"
                    - !<Copy>
                      from: "/order_direction"
                      to: "/sortCriteria/order"
                    - !<Copy>
                      from: "/ranking"
                      to: "/sortCriteria/compareStringsAs"
                  output: !<OutputMap>
                    nodes:
                    - !<Copy>
                      from: "/documents"
                      to: "/COVERAGES_ELEMENTS"
                pipelineChanges: {}
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR VIDE"
                exitOn: "FAILURE"
                nodes:
                - !<BRANCH>
                  switchProperty: "/TAG_APPLIQUE"
                  nodes:
                  - !<LOOP>
                    label: "true"
                    inputArray: "/COVERAGES_ELEMENTS"
                    nodes:
                    - !<BRANCH>
                      evaluateLabels: true
                      nodes:
                      - !<SEQUENCE>
                        label: "%COVERAGES_ELEMENTS/marketing_order% == %RANKING_TAG_APPLIQUE%"
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "RESET TAG MAX"
                          nodes:
                          - !<Transformer>
                            serviceName: "AFS_common_apiweb_v1.pub.number:returnNull"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/value_return"
                                to: "/COVERAGES_ELEMENTS/marketing_order"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "tns1:getCoverage"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                              - name: "propertyName"
                                type: !<string> {}
                              - name: "DATA_NAME"
                                type: !<string> {}
                              - name: "ATTRIBUTE_LIST"
                                type: !<document> {}
                              - name: "DATA_MIN"
                                type: !<string> {}
                              - name: "DATA_VALUE"
                                type: !<string> {}
                              - name: "DATA_MAX"
                                type: !<string> {}
                              - name: "MIN_VALUE"
                                type: !<string> {}
                              - name: "SERVICES_RETENUS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "RESTRICTIONS_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TAG_APPLIQUE"
                                type: !<string> {}
                              - name: "NIVEAU_COUVERTURE_CONTRAT"
                                type: !<string> {}
                              - name: "GARANTIES_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                              - name: "RANKING_TAG_APPLIQUE"
                                type: !<javatype>
                                  wrapperType: "java.lang.Integer"
                              - name: "auth"
                                type: !<document> {}
                              - name: "timeout"
                                type: !<string> {}
                              - name: "FORMULE_CONTRAT"
                                type: !<string> {}
                              - name: "coverage_attributes_element_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_LIST_CLONE"
                                type: !<document> {}
                              - name: "coverage_attributes_elements_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "coverage_attributes_element"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "TAG_EVOLVED"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "COVERAGES_ELEMENT_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "packageName"
                                type: !<string> {}
                              - name: "_url"
                                type: !<string> {}
                              - name: "propertyKey"
                                type: !<document> {}
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "iard.endpoint"
                                type: !<string> {}
                              - name: "iard.timeout"
                                type: !<string> {}
                              - name: "iard.user"
                                type: !<string> {}
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "iard.password"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "property"
                                type: !<document> {}
                              - name: "tns1:getCoverageResponse"
                                type: !<docref>
                                  optional: true
                                  xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                              - name: "fault"
                                type: !<document>
                                  optional: true
                              - name: "transportInfo"
                                type: !<document>
                                  optional: true
                              - name: "COVERAGES_ELEMENTS_FILTERED"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "COMPTEUR"
                                type: !<string> {}
                              - name: "numeric_value"
                                type: !<javatype>
                                  wrapperType: "java.lang.Double"
                              - name: "ranking"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                              - name: "DATA_NAME_TRIM"
                                type: !<string> {}
                              - name: "DESCRIPTION"
                                type: !<string> {}
                              - name: "UNIT"
                                type: !<string> {}
                              - name: "propertyValue"
                                type: !<string>
                                  optional: true
                        - !<MAP>
                          comment: "DEBUG"
            - !<SEQUENCE>
              label: "CATEGORY"
              exitOn: "FAILURE"
              nodes:
              - !<MAP>
                comment: "Order by"
                nodes:
                - !<SetValue>
                  to: "/order_by"
                  value: "coverage_category/id"
                pipelineChanges:
                  added: !<document>
                    fields:
                    - name: "tns1:getCoverage"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                    - name: "propertyName"
                      type: !<string> {}
                    - name: "DATA_NAME"
                      type: !<string> {}
                    - name: "ATTRIBUTE_LIST"
                      type: !<document> {}
                    - name: "DATA_MIN"
                      type: !<string> {}
                    - name: "DATA_VALUE"
                      type: !<string> {}
                    - name: "DATA_MAX"
                      type: !<string> {}
                    - name: "MIN_VALUE"
                      type: !<string> {}
                    - name: "SERVICES_RETENUS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "RESTRICTIONS_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "TAG_APPLIQUE"
                      type: !<string> {}
                    - name: "NIVEAU_COUVERTURE_CONTRAT"
                      type: !<string> {}
                    - name: "GARANTIES_RETENUES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                    - name: "RANKING_TAG_APPLIQUE"
                      type: !<javatype>
                        wrapperType: "java.lang.Integer"
                    - name: "auth"
                      type: !<document> {}
                    - name: "timeout"
                      type: !<string> {}
                    - name: "FORMULE_CONTRAT"
                      type: !<string> {}
                    - name: "coverage_attributes_element_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "LIBELLE_COMMERCIAL_CONTRAT"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENTS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_LIST_CLONE"
                      type: !<document> {}
                    - name: "coverage_attributes_elements_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "FORMULE_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "PACKS_SOUSCRITS"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "TYPE_GARANTIE"
                      type: !<string> {}
                    - name: "coverage_attributes_element"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "coverage_attributes_elements"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                    - name: "TAG_EVOLVED"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "COVERAGES_ELEMENT_CLONE"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "ATTRIBUTE_TYPE"
                      type: !<string> {}
                    - name: "COUVERTURES_SOUSCRITES"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                    - name: "packageName"
                      type: !<string> {}
                    - name: "_url"
                      type: !<string> {}
                    - name: "propertyKey"
                      type: !<document> {}
                    - name: "AXAContextHeader"
                      type: !<docref>
                        ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                    - name: "idContrat"
                      type: !<string>
                        xmlType: "string"
                    - name: "iard.endpoint"
                      type: !<string> {}
                    - name: "iard.timeout"
                      type: !<string> {}
                    - name: "iard.user"
                      type: !<string> {}
                    - name: "COVERAGE_REJECTED"
                      type: !<string> {}
                    - name: "iard.password"
                      type: !<string> {}
                    - name: "order_by"
                      type: !<string> {}
                    - name: "order_direction"
                      type: !<string> {}
                    - name: "reponseContrat"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                    - name: "evolved"
                      type: !<javatype>
                        wrapperType: "java.lang.Boolean"
                    - name: "reference"
                      type: !<string> {}
                    - name: "property"
                      type: !<document> {}
                    - name: "tns1:getCoverageResponse"
                      type: !<docref>
                        optional: true
                        xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                        ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                    - name: "fault"
                      type: !<document>
                        optional: true
                    - name: "transportInfo"
                      type: !<document>
                        optional: true
                    - name: "COVERAGES_ELEMENTS_FILTERED"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "COMPTEUR"
                      type: !<string> {}
                    - name: "numeric_value"
                      type: !<javatype>
                        wrapperType: "java.lang.Double"
                    - name: "ranking"
                      type: !<string> {}
                    - name: "COVERAGES_ELEMENT"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                    - name: "coverage_category"
                      type: !<docref>
                        ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                    - name: "DATA_NAME_TRIM"
                      type: !<string> {}
                    - name: "DESCRIPTION"
                      type: !<string> {}
                    - name: "UNIT"
                      type: !<string> {}
                    - name: "propertyValue"
                      type: !<string>
                        optional: true
              - !<MAP>
                comment: "string ranking"
                nodes:
                - !<SetValue>
                  to: "/ranking"
                  value: "string"
              - !<BRANCH>
                switchProperty: "/order_direction"
                nodes:
                - !<SEQUENCE>
                  label: "ASC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "ascending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - !<SEQUENCE>
                  label: "DESC"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    nodes:
                    - !<SetValue>
                      to: "/order_direction"
                      value: "descending"
                    pipelineChanges:
                      added: !<document>
                        fields:
                        - name: "tns:GetCoverage"
                          type: !<docref>
                            ref: "AFS_COMPOSITE_CoverageServices_v1.ws.consumer.v3.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_GetCoverage"
                        - name: "DATA_NAME"
                          type: !<string> {}
                        - name: "ATTRIBUTE_LIST"
                          type: !<document> {}
                        - name: "SERVICES_RETENUS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "DATA_VALUE"
                          type: !<string> {}
                        - name: "RESTRICTIONS_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "NIVEAU_COUVERTURE_CONTRAT"
                          type: !<string> {}
                        - name: "GARANTIES_RETENUES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                        - name: "auth"
                          type: !<document> {}
                        - name: "timeout"
                          type: !<string> {}
                        - name: "FORMULE_CONTRAT"
                          type: !<string> {}
                        - name: "LIBELLE_COMMERCIAL_CONTRAT"
                          type: !<string> {}
                        - name: "FORMULE_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "PACKS_SOUSCRITS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "coverage_attributes_element_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "COVERAGES_ELEMENT"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "COVERAGES_ELEMENTS"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "ATTRIBUTE_LIST_CLONE"
                          type: !<document> {}
                        - name: "coverage_attributes_elements_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "coverage_attributes_elements"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TYPE_GARANTIE"
                          type: !<string> {}
                        - name: "ATTRIBUTE_TYPE"
                          type: !<string> {}
                        - name: "coverage_attributes_element"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                        - name: "TAG_EVOLVED"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "COUVERTURES_SOUSCRITES"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                        - name: "COVERAGES_ELEMENT_CLONE"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                        - name: "packageName"
                          type: !<string> {}
                        - name: "_url"
                          type: !<string> {}
                        - name: "propertyKey"
                          type: !<document> {}
                        - name: "idContrat"
                          type: !<string>
                            xmlType: "string"
                        - name: "AXAContextHeader"
                          type: !<docref>
                            ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                        - name: "reponseContrat"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                        - name: "iard.endpoint"
                          type: !<string> {}
                        - name: "iard.timeout"
                          type: !<string> {}
                        - name: "COVERAGE_REJECTED"
                          type: !<string> {}
                        - name: "iard.user"
                          type: !<string> {}
                        - name: "iard.password"
                          type: !<string> {}
                        - name: "order_by"
                          type: !<string> {}
                        - name: "order_direction"
                          type: !<string> {}
                        - name: "evolved"
                          type: !<javatype>
                            wrapperType: "java.lang.Boolean"
                        - name: "property"
                          type: !<document> {}
                        - name: "fault"
                          type: !<document>
                            optional: true
                        - name: "transportInfo"
                          type: !<document>
                            optional: true
                        - name: "COMPTEUR"
                          type: !<string> {}
                        - name: "DATA_NAME_TRIM"
                          type: !<string> {}
                        - name: "DESCRIPTION"
                          type: !<string> {}
                        - name: "UNIT"
                          type: !<string> {}
                        - name: "COVERAGES_ELEMENTS_FILTERED"
                          type: !<docref>
                            ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR ZZZZ"
                exitOn: "FAILURE"
                nodes:
                - !<MAP>
                  comment: "RESET TAG APPLIQUE"
                  nodes:
                  - !<SetValue>
                    to: "/TAG_APPLIQUE"
                    value: "false"
                  pipelineChanges:
                    added: !<document>
                      fields:
                      - name: "AXAContextHeader"
                        type: !<docref>
                          ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                      - name: "idContrat"
                        type: !<string>
                          xmlType: "string"
                      - name: "type"
                        type: !<string> {}
                      - name: "order_by"
                        type: !<string> {}
                      - name: "order_direction"
                        type: !<string> {}
                      - name: "evolved"
                        type: !<javatype>
                          wrapperType: "java.lang.Boolean"
                      - name: "reference"
                        type: !<string> {}
                      - name: "ranking"
                        type: !<string> {}
                      - name: "COVERAGES_ELEMENTS"
                        type: !<docref>
                          ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                      - name: "TAG_APPLIQUE"
                        type: !<string> {}
                - !<LOOP>
                  inputArray: "/COVERAGES_ELEMENTS"
                  nodes:
                  - !<BRANCH>
                    switchProperty: "/COVERAGES_ELEMENTS/marketing_order"
                    nodes:
                    - !<SEQUENCE>
                      label: "$null"
                      exitOn: "FAILURE"
                      nodes:
                      - !<MAP>
                        comment: "FLAG"
                        nodes:
                        - !<SetValue>
                          to: "/TAG_APPLIQUE"
                          value: "true"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "tns1:getCoverage"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                            - name: "DATA_NAME"
                              type: !<string> {}
                            - name: "ATTRIBUTE_LIST"
                              type: !<document> {}
                            - name: "DATA_MIN"
                              type: !<string> {}
                            - name: "DATA_VALUE"
                              type: !<string> {}
                            - name: "DATA_MAX"
                              type: !<string> {}
                            - name: "MIN_VALUE"
                              type: !<string> {}
                            - name: "SERVICES_RETENUS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "RESTRICTIONS_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TAG_APPLIQUE"
                              type: !<string> {}
                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                              type: !<string> {}
                            - name: "GARANTIES_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                            - name: "auth"
                              type: !<document> {}
                            - name: "timeout"
                              type: !<string> {}
                            - name: "FORMULE_CONTRAT"
                              type: !<string> {}
                            - name: "coverage_attributes_element_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENTS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_LIST_CLONE"
                              type: !<document> {}
                            - name: "coverage_attributes_elements_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "FORMULE_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "PACKS_SOUSCRITS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TYPE_GARANTIE"
                              type: !<string> {}
                            - name: "coverage_attributes_element"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "TAG_EVOLVED"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "COVERAGES_ELEMENT_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_TYPE"
                              type: !<string> {}
                            - name: "COUVERTURES_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "packageName"
                              type: !<string> {}
                            - name: "_url"
                              type: !<string> {}
                            - name: "propertyKey"
                              type: !<document> {}
                            - name: "AXAContextHeader"
                              type: !<docref>
                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                            - name: "idContrat"
                              type: !<string>
                                xmlType: "string"
                            - name: "iard.endpoint"
                              type: !<string> {}
                            - name: "iard.timeout"
                              type: !<string> {}
                            - name: "iard.user"
                              type: !<string> {}
                            - name: "COVERAGE_REJECTED"
                              type: !<string> {}
                            - name: "iard.password"
                              type: !<string> {}
                            - name: "order_by"
                              type: !<string> {}
                            - name: "order_direction"
                              type: !<string> {}
                            - name: "reponseContrat"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                            - name: "evolved"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "reference"
                              type: !<string> {}
                            - name: "property"
                              type: !<document> {}
                            - name: "tns1:getCoverageResponse"
                              type: !<docref>
                                optional: true
                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                            - name: "fault"
                              type: !<document>
                                optional: true
                            - name: "transportInfo"
                              type: !<document>
                                optional: true
                            - name: "COVERAGES_ELEMENTS_FILTERED"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "COMPTEUR"
                              type: !<string> {}
                            - name: "numeric_value"
                              type: !<javatype>
                                wrapperType: "java.lang.Double"
                            - name: "ranking"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENT"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "coverage_category"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                            - name: "DATA_NAME_TRIM"
                              type: !<string> {}
                            - name: "DESCRIPTION"
                              type: !<string> {}
                            - name: "UNIT"
                              type: !<string> {}
                            - name: "propertyValue"
                              type: !<string> {}
                      - !<MAP>
                        comment: "APPLY TAG ZZZZ"
                        nodes:
                        - !<SetValue>
                          to: "/COVERAGES_ELEMENTS/coverage_category/id"
                          value: "ZZZZ"
                        pipelineChanges:
                          added: !<document>
                            fields:
                            - name: "tns1:getCoverage"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                            - name: "propertyName"
                              type: !<string> {}
                            - name: "DATA_NAME"
                              type: !<string> {}
                            - name: "ATTRIBUTE_LIST"
                              type: !<document> {}
                            - name: "DATA_MIN"
                              type: !<string> {}
                            - name: "DATA_VALUE"
                              type: !<string> {}
                            - name: "DATA_MAX"
                              type: !<string> {}
                            - name: "MIN_VALUE"
                              type: !<string> {}
                            - name: "SERVICES_RETENUS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "RESTRICTIONS_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TAG_APPLIQUE"
                              type: !<string> {}
                            - name: "NIVEAU_COUVERTURE_CONTRAT"
                              type: !<string> {}
                            - name: "GARANTIES_RETENUES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                            - name: "RANKING_TAG_APPLIQUE"
                              type: !<javatype>
                                wrapperType: "java.lang.Integer"
                            - name: "auth"
                              type: !<document> {}
                            - name: "timeout"
                              type: !<string> {}
                            - name: "FORMULE_CONTRAT"
                              type: !<string> {}
                            - name: "coverage_attributes_element_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "LIBELLE_COMMERCIAL_CONTRAT"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENTS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_LIST_CLONE"
                              type: !<document> {}
                            - name: "coverage_attributes_elements_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "FORMULE_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "PACKS_SOUSCRITS"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "TYPE_GARANTIE"
                              type: !<string> {}
                            - name: "coverage_attributes_element"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "coverage_attributes_elements"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                            - name: "TAG_EVOLVED"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "COVERAGES_ELEMENT_CLONE"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "ATTRIBUTE_TYPE"
                              type: !<string> {}
                            - name: "COUVERTURES_SOUSCRITES"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                            - name: "packageName"
                              type: !<string> {}
                            - name: "_url"
                              type: !<string> {}
                            - name: "propertyKey"
                              type: !<document> {}
                            - name: "AXAContextHeader"
                              type: !<docref>
                                ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                            - name: "idContrat"
                              type: !<string>
                                xmlType: "string"
                            - name: "iard.endpoint"
                              type: !<string> {}
                            - name: "iard.timeout"
                              type: !<string> {}
                            - name: "iard.user"
                              type: !<string> {}
                            - name: "COVERAGE_REJECTED"
                              type: !<string> {}
                            - name: "iard.password"
                              type: !<string> {}
                            - name: "order_by"
                              type: !<string> {}
                            - name: "order_direction"
                              type: !<string> {}
                            - name: "reponseContrat"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                            - name: "evolved"
                              type: !<javatype>
                                wrapperType: "java.lang.Boolean"
                            - name: "reference"
                              type: !<string> {}
                            - name: "property"
                              type: !<document> {}
                            - name: "tns1:getCoverageResponse"
                              type: !<docref>
                                optional: true
                                xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                            - name: "fault"
                              type: !<document>
                                optional: true
                            - name: "transportInfo"
                              type: !<document>
                                optional: true
                            - name: "COVERAGES_ELEMENTS_FILTERED"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "COMPTEUR"
                              type: !<string> {}
                            - name: "numeric_value"
                              type: !<javatype>
                                wrapperType: "java.lang.Double"
                            - name: "ranking"
                              type: !<string> {}
                            - name: "COVERAGES_ELEMENT"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                            - name: "coverage_category"
                              type: !<docref>
                                ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                            - name: "DATA_NAME_TRIM"
                              type: !<string> {}
                            - name: "DESCRIPTION"
                              type: !<string> {}
                            - name: "UNIT"
                              type: !<string> {}
                            - name: "propertyValue"
                              type: !<string>
                                optional: true
              - !<MAP>
                comment: "APPLY FILTER"
                nodes:
                - !<Transformer>
                  serviceName: "AFS_common_apiweb_v1.pub.document:sortDocuments"
                  input: !<InputMap>
                    nodes:
                    - !<Copy>
                      from: "/COVERAGES_ELEMENTS"
                      to: "/documents"
                    - !<Copy>
                      from: "/order_by"
                      to: "/sortCriteria/key"
                    - !<Copy>
                      from: "/order_direction"
                      to: "/sortCriteria/order"
                    - !<Copy>
                      from: "/ranking"
                      to: "/sortCriteria/compareStringsAs"
                  output: !<OutputMap>
                    nodes:
                    - !<Copy>
                      from: "/documents"
                      to: "/COVERAGES_ELEMENTS"
                pipelineChanges: {}
              - !<SEQUENCE>
                comment: "REMPLACER LES ITEMS INCLASSABLES PAR VIDE"
                exitOn: "FAILURE"
                nodes:
                - !<BRANCH>
                  switchProperty: "/TAG_APPLIQUE"
                  nodes:
                  - !<LOOP>
                    label: "true"
                    inputArray: "/COVERAGES_ELEMENTS"
                    nodes:
                    - !<BRANCH>
                      evaluateLabels: true
                      nodes:
                      - !<SEQUENCE>
                        label: "%COVERAGES_ELEMENTS/coverage_category/id% == \"ZZZZ\""
                        exitOn: "FAILURE"
                        nodes:
                        - !<MAP>
                          comment: "RESET TAG MAX"
                          nodes:
                          - !<Transformer>
                            serviceName: "AFS_common_apiweb_v1.pub.number:returnNull"
                            input: !<InputMap> {}
                            output: !<OutputMap>
                              nodes:
                              - !<Copy>
                                from: "/value_return"
                                to: "/COVERAGES_ELEMENTS/coverage_category/id"
                          pipelineChanges:
                            added: !<document>
                              fields:
                              - name: "tns1:getCoverage"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                              - name: "propertyName"
                                type: !<string> {}
                              - name: "DATA_NAME"
                                type: !<string> {}
                              - name: "ATTRIBUTE_LIST"
                                type: !<document> {}
                              - name: "DATA_MIN"
                                type: !<string> {}
                              - name: "DATA_VALUE"
                                type: !<string> {}
                              - name: "DATA_MAX"
                                type: !<string> {}
                              - name: "MIN_VALUE"
                                type: !<string> {}
                              - name: "SERVICES_RETENUS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "RESTRICTIONS_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TAG_APPLIQUE"
                                type: !<string> {}
                              - name: "NIVEAU_COUVERTURE_CONTRAT"
                                type: !<string> {}
                              - name: "GARANTIES_RETENUES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                              - name: "RANKING_TAG_APPLIQUE"
                                type: !<javatype>
                                  wrapperType: "java.lang.Integer"
                              - name: "auth"
                                type: !<document> {}
                              - name: "timeout"
                                type: !<string> {}
                              - name: "FORMULE_CONTRAT"
                                type: !<string> {}
                              - name: "coverage_attributes_element_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "LIBELLE_COMMERCIAL_CONTRAT"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENTS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_LIST_CLONE"
                                type: !<document> {}
                              - name: "coverage_attributes_elements_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "FORMULE_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "PACKS_SOUSCRITS"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "TYPE_GARANTIE"
                                type: !<string> {}
                              - name: "coverage_attributes_element"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "coverage_attributes_elements"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                              - name: "TAG_EVOLVED"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "COVERAGES_ELEMENT_CLONE"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "ATTRIBUTE_TYPE"
                                type: !<string> {}
                              - name: "COUVERTURES_SOUSCRITES"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                              - name: "packageName"
                                type: !<string> {}
                              - name: "_url"
                                type: !<string> {}
                              - name: "propertyKey"
                                type: !<document> {}
                              - name: "AXAContextHeader"
                                type: !<docref>
                                  ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                              - name: "idContrat"
                                type: !<string>
                                  xmlType: "string"
                              - name: "iard.endpoint"
                                type: !<string> {}
                              - name: "iard.timeout"
                                type: !<string> {}
                              - name: "iard.user"
                                type: !<string> {}
                              - name: "COVERAGE_REJECTED"
                                type: !<string> {}
                              - name: "iard.password"
                                type: !<string> {}
                              - name: "order_by"
                                type: !<string> {}
                              - name: "order_direction"
                                type: !<string> {}
                              - name: "reponseContrat"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                              - name: "evolved"
                                type: !<javatype>
                                  wrapperType: "java.lang.Boolean"
                              - name: "reference"
                                type: !<string> {}
                              - name: "property"
                                type: !<document> {}
                              - name: "tns1:getCoverageResponse"
                                type: !<docref>
                                  optional: true
                                  xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                                  ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                              - name: "fault"
                                type: !<document>
                                  optional: true
                              - name: "transportInfo"
                                type: !<document>
                                  optional: true
                              - name: "COVERAGES_ELEMENTS_FILTERED"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "COMPTEUR"
                                type: !<string> {}
                              - name: "numeric_value"
                                type: !<javatype>
                                  wrapperType: "java.lang.Double"
                              - name: "ranking"
                                type: !<string> {}
                              - name: "COVERAGES_ELEMENT"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                              - name: "coverage_category"
                                type: !<docref>
                                  ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                              - name: "DATA_NAME_TRIM"
                                type: !<string> {}
                              - name: "DESCRIPTION"
                                type: !<string> {}
                              - name: "UNIT"
                                type: !<string> {}
                              - name: "propertyValue"
                                type: !<string>
                                  optional: true
                        - !<MAP>
                          comment: "DEBUG"
        - !<SEQUENCE>
          label: "%order_by% == null || %order_by% == \"\""
          exitOn: "FAILURE"
          nodes:
          - !<MAP>
            comment: "MARKETING ORDER"
            nodes:
            - !<SetValue>
              to: "/order_by"
              value: "marketing_order"
            pipelineChanges:
              added: !<document>
                fields:
                - name: "tns1:getCoverage"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContrat"
                - name: "DATA_NAME"
                  type: !<string> {}
                - name: "ATTRIBUTE_LIST"
                  type: !<document> {}
                - name: "SERVICES_RETENUS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                - name: "DATA_VALUE"
                  type: !<string> {}
                - name: "RESTRICTIONS_RETENUES"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                - name: "NIVEAU_COUVERTURE_CONTRAT"
                  type: !<string> {}
                - name: "GARANTIES_RETENUES"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                - name: "auth"
                  type: !<document> {}
                - name: "timeout"
                  type: !<string> {}
                - name: "FORMULE_CONTRAT"
                  type: !<string> {}
                - name: "LIBELLE_COMMERCIAL_CONTRAT"
                  type: !<string> {}
                - name: "FORMULE_SOUSCRITES"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                - name: "PACKS_SOUSCRITS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                - name: "coverage_attributes_element_CLONE"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                - name: "COVERAGES_ELEMENT"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "COVERAGES_ELEMENTS"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "ATTRIBUTE_LIST_CLONE"
                  type: !<document> {}
                - name: "coverage_attributes_elements_CLONE"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                - name: "coverage_attributes_elements"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                - name: "TYPE_GARANTIE"
                  type: !<string> {}
                - name: "ATTRIBUTE_TYPE"
                  type: !<string> {}
                - name: "coverage_attributes_element"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                - name: "TAG_EVOLVED"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "COUVERTURES_SOUSCRITES"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                - name: "COVERAGES_ELEMENT_CLONE"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "packageName"
                  type: !<string> {}
                - name: "_url"
                  type: !<string> {}
                - name: "propertyKey"
                  type: !<document> {}
                - name: "idContrat"
                  type: !<string>
                    xmlType: "string"
                - name: "AXAContextHeader"
                  type: !<docref>
                    ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                - name: "iard.endpoint"
                  type: !<string> {}
                - name: "iard.timeout"
                  type: !<string> {}
                - name: "iard.user"
                  type: !<string> {}
                - name: "COVERAGE_REJECTED"
                  type: !<string> {}
                - name: "iard.password"
                  type: !<string> {}
                - name: "order_by"
                  type: !<string> {}
                - name: "order_direction"
                  type: !<string> {}
                - name: "evolved"
                  type: !<javatype>
                    wrapperType: "java.lang.Boolean"
                - name: "reponseContrat"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                - name: "reference"
                  type: !<string> {}
                - name: "property"
                  type: !<document> {}
                - name: "tns1:getCoverageResponse"
                  type: !<docref>
                    optional: true
                    xmlNamespace: "http://services.axa.fr/contratsiard/cst/coverageservices/1"
                    ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                - name: "fault"
                  type: !<document>
                    optional: true
                - name: "transportInfo"
                  type: !<document>
                    optional: true
                - name: "COMPTEUR"
                  type: !<string> {}
                - name: "DATA_NAME_TRIM"
                  type: !<string> {}
                - name: "COVERAGES_ELEMENTS_FILTERED"
                  type: !<docref>
                    ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                - name: "DESCRIPTION"
                  type: !<string> {}
                - name: "UNIT"
                  type: !<string> {}
          - !<MAP>
            comment: "numeric ranking"
            nodes:
            - !<SetValue>
              to: "/ranking"
              value: "numeric"
          - !<MAP>
            comment: "ASC"
            nodes:
            - !<SetValue>
              to: "/order_direction"
              value: "ascending"
          - !<SEQUENCE>
            comment: "REMPLACER LES ITEMS INCLASSABLES PAR LA MAX VALUE"
            exitOn: "FAILURE"
            nodes:
            - !<MAP>
              comment: "DROP PROPERTY"
              nodes:
              - !<Drop>
                path: "/propertyValue"
            - !<MAP>
              comment: "RESET TAG APPLIQUE"
              nodes:
              - !<SetValue>
                to: "/TAG_APPLIQUE"
                value: "false"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "AXAContextHeader"
                    type: !<docref>
                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                  - name: "idContrat"
                    type: !<string>
                      xmlType: "string"
                  - name: "type"
                    type: !<string> {}
                  - name: "order_by"
                    type: !<string> {}
                  - name: "order_direction"
                    type: !<string> {}
                  - name: "evolved"
                    type: !<javatype>
                      wrapperType: "java.lang.Boolean"
                  - name: "reference"
                    type: !<string> {}
                  - name: "ranking"
                    type: !<string> {}
                  - name: "COVERAGES_ELEMENTS"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - name: "TAG_APPLIQUE"
                    type: !<string> {}
            - !<MAP>
              comment: "getDefaultMaxRank"
              nodes:
              - !<Transformer>
                serviceName: "AFS_APIWEB_To_CommonServices_v1.priv.properties:getDefaultMaxRank"
                input: !<InputMap> {}
                output: !<OutputMap>
                  nodes:
                  - !<Copy>
                    from: "/rank"
                    to: "/propertyValue"
              pipelineChanges:
                added: !<document>
                  fields:
                  - name: "AXAContextHeader"
                    type: !<docref>
                      ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                  - name: "DATA_NAME"
                    type: !<string> {}
                  - name: "DATA_MIN"
                    type: !<string> {}
                  - name: "DATA_MAX"
                    type: !<string> {}
                  - name: "DATA_VALUE"
                    type: !<string> {}
                  - name: "MIN_VALUE"
                    type: !<string> {}
                  - name: "idContrat"
                    type: !<string>
                      xmlType: "string"
                  - name: "policy_type"
                    type: !<string>
                      picklistChoices:
                      - "AUTO"
                      - "HOME"
                  - name: "type_garantie"
                    type: !<string> {}
                  - name: "TAG_APPLIQUE"
                    type: !<string> {}
                  - name: "order_by"
                    type: !<string> {}
                  - name: "COVERAGES_ELEMENTS"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                  - name: "order_direction"
                    type: !<string> {}
                  - name: "RANKING_TAG_APPLIQUE"
                    type: !<javatype>
                      wrapperType: "java.lang.Integer"
                  - name: "evolved"
                    type: !<javatype>
                      wrapperType: "java.lang.Boolean"
                  - name: "reference"
                    type: !<string> {}
                  - name: "coverage_attributes_element"
                    type: !<docref>
                      ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                  - name: "SKIP_ELEMENT"
                    type: !<string> {}
                  - name: "numeric_value"
                    type: !<javatype>
                      wrapperType: "java.lang.Double"
                  - name: "ranking"
                    type: !<string> {}
                  - name: "propertyValue"
                    type: !<string> {}
            - !<LOOP>
              inputArray: "/COVERAGES_ELEMENTS"
              nodes:
              - !<BRANCH>
                switchProperty: "/COVERAGES_ELEMENTS/marketing_order"
                nodes:
                - !<SEQUENCE>
                  label: "$null"
                  exitOn: "FAILURE"
                  nodes:
                  - !<MAP>
                    comment: "FLAG"
                    nodes:
                    - !<SetValue>
                      to: "/TAG_APPLIQUE"
                      value: "true"
                    - !<Transformer>
                      serviceName: "AFS_common_apiweb_v1.pub.number:StringToInteger"
                      input: !<InputMap>
                        nodes:
                        - !<Copy>
                          from: "/propertyValue"
                          to: "/input"
                      output: !<OutputMap>
                        nodes:
                        - !<Copy>
                          from: "/number_integer"
                          to: "/RANKING_TAG_APPLIQUE"
                    pipelineChanges: {}
                  - !<MAP>
                    comment: "APPLY TAG MAX"
                    nodes:
                    - !<Copy>
                      from: "/RANKING_TAG_APPLIQUE"
                      to: "/COVERAGES_ELEMENTS/marketing_order"
                    pipelineChanges: {}
          - !<MAP>
            comment: "APPLY FILTER"
            nodes:
            - !<Transformer>
              serviceName: "AFS_common_apiweb_v1.pub.document:sortDocuments"
              input: !<InputMap>
                nodes:
                - !<Copy>
                  from: "/COVERAGES_ELEMENTS"
                  to: "/documents"
                - !<Copy>
                  from: "/order_by"
                  to: "/sortCriteria/key"
                - !<Copy>
                  from: "/order_direction"
                  to: "/sortCriteria/order"
                - !<Copy>
                  from: "/ranking"
                  to: "/sortCriteria/pattern"
              output: !<OutputMap>
                nodes:
                - !<Copy>
                  from: "/documents"
                  to: "/COVERAGES_ELEMENTS"
            pipelineChanges: {}
          - !<SEQUENCE>
            comment: "REMPLACER LES ITEMS INCLASSABLES PAR VIDE"
            exitOn: "FAILURE"
            nodes:
            - !<BRANCH>
              switchProperty: "/TAG_APPLIQUE"
              nodes:
              - !<LOOP>
                label: "true"
                inputArray: "/COVERAGES_ELEMENTS"
                nodes:
                - !<BRANCH>
                  evaluateLabels: true
                  nodes:
                  - !<SEQUENCE>
                    label: "%COVERAGES_ELEMENTS/marketing_order% == %RANKING_TAG_APPLIQUE%"
                    exitOn: "FAILURE"
                    nodes:
                    - !<MAP>
                      comment: "RESET TAG MAX"
                      nodes:
                      - !<Transformer>
                        serviceName: "AFS_common_apiweb_v1.pub.number:returnNull"
                        input: !<InputMap> {}
                        output: !<OutputMap>
                          nodes:
                          - !<Copy>
                            from: "/value_return"
                            to: "/COVERAGES_ELEMENTS/marketing_order"
                      pipelineChanges:
                        added: !<document>
                          fields:
                          - name: "packageName"
                            type: !<string> {}
                          - name: "propertyName"
                            type: !<string> {}
                          - name: "AXAContextHeader"
                            type: !<docref>
                              ref: "AIFDocuments.envelope.commonDataFormat.doc.pub:contextHeader"
                          - name: "DATA_NAME"
                            type: !<string> {}
                          - name: "ATTRIBUTE_LIST"
                            type: !<document> {}
                          - name: "DATA_MIN"
                            type: !<string> {}
                          - name: "DATA_VALUE"
                            type: !<string> {}
                          - name: "DATA_MAX"
                            type: !<string> {}
                          - name: "MIN_VALUE"
                            type: !<string> {}
                          - name: "SERVICES_RETENUS"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                          - name: "RESTRICTIONS_RETENUES"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                          - name: "TAG_APPLIQUE"
                            type: !<string> {}
                          - name: "NIVEAU_COUVERTURE_CONTRAT"
                            type: !<string> {}
                          - name: "RANKING_TAG_APPLIQUE"
                            type: !<javatype>
                              wrapperType: "java.lang.Integer"
                          - name: "GARANTIES_RETENUES"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_ns1_ProductCoverageSpecification_Type"
                          - name: "idContrat"
                            type: !<string>
                              xmlType: "string"
                          - name: "type_garantie"
                            type: !<string> {}
                          - name: "FORMULE_CONTRAT"
                            type: !<string> {}
                          - name: "coverage_attributes_element_CLONE"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - name: "LIBELLE_COMMERCIAL_CONTRAT"
                            type: !<string> {}
                          - name: "COVERAGES_ELEMENTS"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                          - name: "ATTRIBUTE_LIST_CLONE"
                            type: !<document> {}
                          - name: "coverage_attributes_elements_CLONE"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - name: "FORMULE_SOUSCRITES"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                          - name: "PACKS_SOUSCRITS"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                          - name: "TYPE_GARANTIE"
                            type: !<string> {}
                          - name: "coverage_attributes_element"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - name: "coverage_attributes_elements"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageAttribute"
                          - name: "TAG_EVOLVED"
                            type: !<javatype>
                              wrapperType: "java.lang.Boolean"
                          - name: "COVERAGES_ELEMENT_CLONE"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                          - name: "ATTRIBUTE_TYPE"
                            type: !<string> {}
                          - name: "COUVERTURES_SOUSCRITES"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns_ProductComposition_Type"
                          - name: "order_by"
                            type: !<string> {}
                          - name: "order_direction"
                            type: !<string> {}
                          - name: "evolved"
                            type: !<javatype>
                              wrapperType: "java.lang.Boolean"
                          - name: "reference"
                            type: !<string> {}
                          - name: "reponseContrat"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_reponseContrat"
                          - name: "tns1:getCoverageResponse"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.ws.consumer.EIP_COVERAGE_SERVICES_.docTypes:docTypeRef_tns1_getContratResponse"
                          - name: "COVERAGE_REJECTED"
                            type: !<string> {}
                          - name: "coverageAttributesToMask"
                            type: !<document> {}
                          - name: "numeric_value"
                            type: !<javatype>
                              wrapperType: "java.lang.Double"
                          - name: "COVERAGES_ELEMENT"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                          - name: "coverage_category"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:CoverageCategorySpecRef"
                          - name: "DATA_NAME_TRIM"
                            type: !<string> {}
                          - name: "DESCRIPTION"
                            type: !<string> {}
                          - name: "UNIT"
                            type: !<string> {}
                          - name: "COVERAGES_ELEMENTS_FILTERED"
                            type: !<docref>
                              ref: "AFS_APIWEB_To_Business_v1.doc.pub.APIDoc:Coverage"
                          - name: "ranking"
                            type: !<string> {}
                          - name: "propertyValue"
                            type: !<string> {}
                    - !<MAP>
                      comment: "DEBUG"
